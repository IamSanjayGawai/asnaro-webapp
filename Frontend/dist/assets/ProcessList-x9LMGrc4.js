import{d as W,r as o,j as t,aE as ue,a as fe,ae as be,z as je,u as Ne,S as ye,aF as we}from"./index-w2wx-x_X.js";import{K as ve}from"./baseline-5AKzli58.js";import{u as Ce}from"./useTableTheme-44lDDVWp.js";import{R as ke}from"./index.esm-y_8cUbAG.js";import"./emotion-react.browser.esm-kI5PoqX3.js";import"./hoist-non-react-statics.cjs-j2Vrlo-h.js";import"./extends-_9I-EFOp.js";import"./assertThisInitialized-4q6YPdh3.js";import"./memoize-one.esm-oV5jpQgL.js";import"./setPrototypeOf-ahVgEFUp.js";import"./iconBase-7AsOp5YA.js";const _e=({isDeleteModal:n,setIsDeleteModal:l,id:h,show:j=!0})=>{const N=W(),[y]=o.useState(!0),x=w=>{N(ue(h)),console.log("Deleting selected IDs:",w)};return t.jsx(t.Fragment,{children:n?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:`justify-center items-center flex overflow-x-hidden overflow-y-auto fixed inset-0 z-50 outline-none focus:outline-none\r
            \r
            `,children:t.jsx("div",{className:"relative w-auto my-6 mx-auto max-w-3xl",children:t.jsxs("div",{className:"border-0  shadow-lg relative flex gap-5 flex-col w-full bg-white outline-none focus:outline-none",children:[t.jsx("div",{className:"flex items-start justify-between p-4  rounded-t",children:t.jsx("button",{className:"p-1 ml-auto bg-transparent border-0 text-black float-right text-3xl leading-none font-semibold outline-none focus:outline-none",onClick:()=>{l(!1)},children:t.jsx(ke,{})})}),y?t.jsxs("div",{className:"relative px-4 gap-5 flex-auto ",children:[t.jsx("h3",{className:"mb-6 text-[#255BB3] text-center font-noto-sans-jp font-bold text-[20px]",children:"本気ですか？ ×"}),t.jsx("p",{className:"text-[#808080] text-sm font-noto-sans-jp px-8 text-base font-[500]  w-2/3 mt-[4em] mb-[3em] mx-auto",children:"このプロセス情報を削除してもよろしいですか? [適用] をクリックして続行するか、[キャンセル] をクリックして戻ります"})]}):t.jsxs("div",{className:"relative px-4 gap-5 flex-auto ",children:[t.jsx("h3",{className:"mb-6 text-[#255BB3] text-center font-noto-sans-jp font-bold text-[20px]",children:"本気ですか？ ×"}),t.jsx("p",{className:"text-[#808080] text-sm font-noto-sans-jp px-8 text-base font-[500]  w-2/3 mt-[4em] mb-[3em] mx-auto",children:"このプロセス情報を削除してもよろしいですか? [適用] をクリックして続行するか、[キャンセル] をクリックして戻ります"})]}),t.jsxs("div",{className:"grid grid-cols-1 justify-center p-4 w-2/3 mx-auto mb-8 ",children:[j&&t.jsx("button",{className:"bg-[#FFAA00] text-white  font-bold uppercase text-sm px-6 py-3 w-[348px]  outline-none  mx-auto mb-2",type:"submit",onClick:()=>{x(h),l(!1)},children:"適用する"}),t.jsx("button",{className:"bg-[#808080] text-white  font-bold uppercase text-sm px-6 py-3 w-[348px] mx-auto  outline-none mb-1",type:"button",onClick:()=>l(!1),children:"戻る"})]})]})})}),t.jsx("div",{className:"opacity-25 fixed inset-0 z-40 bg-black"})]}):null})},Te=()=>{var V,U,Z,q,J,K,G,H,Q;const{allProcess:n,searchProcessData:l,deleteProcesses:h,loading:j}=fe(be),N=W(),y=je(),x=Ne(),w=Ce("1fr 1fr 1fr 1fr 1fr 2fr 1fr 1fr 1fr 1fr",10),[v,X]=o.useState(""),[C,Y]=o.useState(""),[k,F]=o.useState(""),[_,ee]=o.useState(""),[S,$]=o.useState(""),[I,te]=o.useState(5),[g,u]=o.useState([]),[le,B]=o.useState(!1),[L,M]=o.useState(""),[p,P]=o.useState(parseInt(new URLSearchParams(y.search).get("page"))||1),[R,c]=o.useState("");let T;(e=>{e.processidErr="プロセスIDに無効な文字があります",e.selleridErr="販売者IDに無効な文字が含まれています"})(T||(T={}));const se=e=>{const{value:s}=e.target;X(s)},ae=e=>{const{value:s}=e.target;/^[a-zA-Z0-9]+$/.test(s)?($(s),c("")):(c("プロセスIDに無効な文字があります"),$(s),s===""&&c(""))},ne=e=>{Y(e.target.value)},xe=e=>{const{value:s}=e.target;/^[a-zA-Z0-9]+$/.test(s)?(F(s),c("")):(c("販売者IDに無効な文字が含まれています"),F(s),s===""&&c(""))},ie=e=>{ee(e.target.value)},oe=e=>{te(parseInt(e.target.value))},z=(e,s,a=!1)=>{const i={process_id:S,process_name:v,status:C,seller_id:k,seller_name:_,currentPage:e,limit:s};a&&P(1),N(we(i)),u([])},A=async e=>{P(e),x(`/admin/dashboard/process-management?page=${e}`)},re=async()=>{var e,s,a;try{const i=((e=l==null?void 0:l.sortedCsvProcesses)==null?void 0:e.length)>0?(s=l==null?void 0:l.sortedCsvProcesses)==null?void 0:s.map(m=>m._id):(a=n==null?void 0:n.sortedCsvProcesses)==null?void 0:a.map(m=>m._id);if(!i||i.length===0){console.log("No process IDs available for download.");return}const d=await fetch("http://localhost:8000/admin/download/csv",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({process_ids:i,formType:"process-list"})});if(!d.ok)throw new Error("Network response was not ok.");const f=await d.blob(),b=window.URL.createObjectURL(f),r=document.createElement("a");r.href=b,r.setAttribute("download","process_list.csv"),document.body.appendChild(r),r.click()}catch(i){console.error("Error downloading CSV:",i)}},O=e=>{e.preventDefault(),A(1),c(""),z(1,I,!0)};o.useEffect(()=>{z(p,I)},[p,h]);const de={nodes:((l==null?void 0:l.data)||(n==null?void 0:n.data)||[" No data Found"]).map(e=>{var f,b;const s=((f=e==null?void 0:e.availabilities)==null?void 0:f.map(r=>r.selectedStatus))||[],a={Vacancies:0,Adjustable:0,"Consultation Required":0,"No Vacancies":0};s.forEach(r=>{a[r]!==void 0&&a[r]++});const i=Object.keys(a).reduce((r,m)=>a[r]>a[m]?r:m);let d="";return i==="Vacancies"?d="空きあり":i==="Adjustable"?d="調整可能":i==="Consultation Required"?d="要相談":d="空きなし",{key:(e==null?void 0:e._id)||"NA",Process_ID:(e==null?void 0:e._id)||"NA",Exhibiting_company_ID:((b=e==null?void 0:e.user)==null?void 0:b._id)||"NA",Process_name:(e==null?void 0:e.name)||"NA",category:(e==null?void 0:e.parent_category)||"NA",tag:(e==null?void 0:e.tags)||"NA",area:(e==null?void 0:e.mun)||"NA",status:(e==null?void 0:e.status)||"NA",evaluation:(e==null?void 0:e.unit_price)||"NA",Number_of_free_days:d}})},ce=e=>{u(s=>{const a=s.includes(e)?s.filter(i=>i!==e):[...s,e];return console.log("Updated selected IDs:",a),a})},me=e=>{if(e.target.checked){const s=(l==null?void 0:l.data.map(a=>a._id))||[];u(s),console.log("Selected all IDs:",s)}else u([])},pe=()=>{if(g.length===0){M("削除するプロセスを少なくとも 1 つ選択してください。");return}B(!0),M("")},he=[{label:t.jsx("input",{type:"checkbox",onChange:me,checked:g.length===(((V=l==null?void 0:l.data)==null?void 0:V.length)||0)}),key:"checkbox",renderCell:e=>t.jsx("input",{type:"checkbox",checked:g.includes(e.Process_ID),onChange:()=>ce(e.Process_ID)})},{label:t.jsx("span",{className:"flex justify-center",children:"工程ID"}),key:"Process_ID",renderCell:e=>t.jsx("div",{className:"text-[#808080] text-[12px] font-[400] line-clamp-3 text-center break-all",style:{whiteSpace:"normal"},onClick:()=>x(`/admin/dashboard/process-management-detail/${e.Process_ID}`),children:e.Process_ID||"NA"})},{label:"出品企業ID",key:"Exhibiting_company_ID",renderCell:e=>t.jsx("div",{className:"text-[#808080] text-[12px] font-[400] line-clamp-3 text-center break-all",style:{whiteSpace:"normal"},onClick:()=>x(`/admin/dashboard/process-management-detail/${e.Process_ID}`),children:e.Exhibiting_company_ID||"NA"})},{label:"工程名",key:"Process_name",renderCell:e=>t.jsx("div",{className:"text-[#808080] text-[12px] font-[400] line-clamp-3 text-center",style:{whiteSpace:"normal"},onClick:()=>x(`/admin/dashboard/process-management-detail/${e.Process_ID}`),children:e.Process_name||"NA"})},{label:"カテゴリ",key:"category",renderCell:e=>t.jsx("div",{className:"text-[#808080] text-[12px] font-[400] line-clamp-1 text-center",style:{whiteSpace:"normal"},onClick:()=>x(`/admin/dashboard/process-management-detail/${e.Process_ID}`),children:e.category||"NA"})},{label:"タグ",key:"tags",renderCell:e=>t.jsx("div",{className:"text-[#808080] text-[12px] font-[400] text-center break-all",style:{whiteSpace:"normal"},onClick:()=>x(`/admin/dashboard/process-management-detail/${e.Process_ID}`),children:e.tag||"NA"})},{label:"地域",key:"area",renderCell:e=>t.jsx("div",{className:"text-[#808080] text-[12px] font-[400] line-clamp-1 text-center",style:{whiteSpace:"normal"},onClick:()=>x(`/admin/dashboard/process-management-detail/${e.Process_ID}`),children:e.area||"NA"})},{label:"ステータス",key:"status",renderCell:e=>t.jsx("div",{className:"text-[#808080] text-[12px] font-[400] line-clamp-1 text-center",style:{whiteSpace:"normal"},onClick:()=>x(`/admin/dashboard/process-management-detail/${e.Process_ID}`),children:e.status||"NA"})},{label:"評価",key:"evaluation",renderCell:e=>t.jsx("div",{className:"text-[#808080] text-[12px] font-[400] line-clamp-1 text-center",style:{whiteSpace:"normal"},onClick:()=>x(`/admin/dashboard/process-management-detail/${e.Process_ID}`),children:e.evaluation||"NA"})},{label:"空き日数",key:"Number_of_free_days",renderCell:e=>t.jsx("div",{className:"text-[#808080] text-[12px] font-[400] line-clamp-1 text-center",style:{whiteSpace:"normal"},onClick:()=>x(`/admin/dashboard/process-management-detail/${e.Process_ID}`),children:e.Number_of_free_days||"NA"})}],E=Math.max(1,p-Math.floor(10/2)),D=Math.min(E+10-1,((U=l==null?void 0:l.pagination)==null?void 0:U.totalPages)||((Z=n==null?void 0:n.pagination)==null?void 0:Z.totalPages)),ge=Array.from({length:D-E+1},(e,s)=>E+s);return t.jsxs(t.Fragment,{children:[j?t.jsx(ye,{}):t.jsxs("div",{className:"mb-40",children:[t.jsxs("div",{className:"lg:mx-20 md:mx-8 xs:mx-8 flex flex-col mt-[50px]",children:[t.jsx("h1",{className:"text-[#808080] font-[700] text-[24px] mb-4",children:"工程一覧"}),t.jsxs("div",{className:"w-full p-4 bg-[#F8F8F8] text-[#808080]",children:["検索条件設定",t.jsxs("form",{className:"xs:w-full sm:w-full md:w-[18rem] lg:w-[20rem] flex flex-col justify-start",children:[t.jsxs("div",{className:"flex lg:flex-row xs:flex-col md:flex-row lg:items-center justify-between mt-5",children:[t.jsx("label",{className:"text-[#808080] lg:text-[14px] xs:text-[12px]",children:"工程ID"}),t.jsx("input",{type:"text",className:"border lg:text-[14px] xs:text-[12px] xs:mt-[5px] lg:h-[30px] md:h-[30px] xs:h-[39px]",value:S,onChange:ae})]}),t.jsxs("div",{className:"flex lg:flex-row xs:flex-col md:flex-row lg:items-center justify-between mt-5",children:[t.jsx("label",{className:"text-[#808080] lg:text-[14px] xs:text-[12px]",children:"工程名"}),t.jsx("input",{type:"text",className:"border lg:text-[14px] xs:text-[12px] xs:mt-[5px] lg:h-[30px] md:h-[30px] xs:h-[39px]",value:v,onChange:se})]}),t.jsxs("div",{className:"flex lg:flex-row xs:flex-col md:flex-row lg:items-center justify-between mt-5",children:[t.jsx("label",{className:"text-[#808080] lg:text-[14px] xs:text-[12px]",children:"出品企業ID"}),t.jsx("input",{type:"text",className:"border lg:text-[14px] xs:text-[12px] xs:mt-[5px] lg:h-[30px] md:h-[30px] xs:h-[39px]",value:k,onChange:xe})]}),t.jsxs("div",{className:"flex lg:flex-row xs:flex-col md:flex-row lg:items-center justify-between mt-5",children:[t.jsx("label",{className:"text-[#808080] lg:text-[14px] xs:text-[12px]",children:"出品企業名"}),t.jsx("input",{type:"text",className:"border lg:text-[14px] xs:text-[12px] xs:mt-[5px] lg:h-[30px] md:h-[30px] xs:h-[39px]",value:_,onChange:ie})]}),t.jsxs("div",{className:"flex flex-row items-center mt-5",children:[t.jsx("label",{className:"text-[#808080] lg:text-[14px] xs:text-[12px]",children:"ステータス"}),t.jsxs("select",{id:"first_name",className:"text-tertiary h-[25px] border-[1px] border-[#DCDCDC] px-10 outline-0 text-sm ml-[3.5rem] lg:text-[14px] xs:text-[12px]",value:C,onChange:ne,children:[t.jsx("option",{className:"text-tertiary",value:"",children:"status"}),t.jsx("option",{className:"text-tertiary",value:"release",children:"release"}),t.jsx("option",{className:"text-tertiary",value:"private",children:"private"})]})]}),t.jsxs("div",{className:"flex xs:flex-row lg:flex-col lg:items-center justify-between mb-3 text-[#808080] lg:text-[14px] xs:text-[12px] mt-5",children:[t.jsxs("div",{className:"flex flex-row lg:w-full lg:gap-[4.5rem] xs:gap-3",children:[t.jsx("label",{className:"text-[#808080] lg:text-[14px] xs:text-[12px] xs:mt-[5px]",children:"表示件数"}),t.jsxs("div",{className:"flex flex-row md:flex-row items-center",children:[t.jsx("select",{id:"first_name",className:"text-tertiary border-[1px] h-[25px] border-[#DCDCDC] lg:px-4 xs:px-1 outline-0 lg:text-[14px] xs:text-[12px] bg-white focus:ring-0 focus:border",value:I,onChange:oe,children:[1,5,10,15,20,25,30,35,40,45,50].map((e,s)=>t.jsx("option",{value:e,children:e},s))}),t.jsx("span",{className:"ml-2",children:" 件"})]})]}),t.jsx("div",{className:"lg:w-full flex justify-end items-center lg:hidden xs:block lg:mt-2 lg:text-[14px] xs:text-[12px]",children:t.jsx("button",{className:"text-white bg-[#255BB3] lg:px-10 xs:px-2 py-1",onClick:O,type:"submit",children:"この条件で検索する"})})]})]}),t.jsx("div",{className:"lg:w-full flex justify-center items-center",children:t.jsx("button",{className:"text-white bg-[#255BB3] lg:px-10 xs:px-2 py-1 lg:mt-2 lg:text-[14px] xs:text-[12px] xs:hidden lg:block",onClick:O,children:"この条件で検索する"})}),R&&t.jsx("p",{className:"text-fifth",children:R})]})]}),t.jsxs("div",{className:"lg:mx-20 md:mx-8 xs:mx-8 mt-[3rem] lg:min-w-[900px]  ",children:[t.jsx("span",{className:"text-center text-[red] lg:text-[14px] xs:text-[12px] break-all   lg:hidden sm:hidden md:hidden ",children:L}),t.jsx("div",{className:"flex items-center justify-between sm:block",children:t.jsxs("div",{className:"flex justify-end gap-2",children:[t.jsx("span",{className:"text-center text-[red] lg:text-[14px] xs:text-[12px] break-all md:block  sm:block xs:hidden lg:block",children:L}),t.jsx("button",{onClick:()=>{pe()},className:"text-white bg-[#808080] px-5 py-1 lg:text-[14px] xs:text-[12px]",children:"消去"}),t.jsx("button",{onClick:()=>x("/admin/dashboard/process-registration"),className:"text-white bg-[#255BB3] px-5 py-1 lg:text-[14px] xs:text-[12px]",children:"新規登録"}),t.jsx("button",{onClick:re,className:"text-white bg-[#FFAA00] px-5 py-1 lg:text-[14px] xs:text-[12px]",children:"CSV出力"})]})}),t.jsx("div",{className:`mt-4  overflow-x-auto ${((q=l==null?void 0:l.data)==null?void 0:q.length)==0?"flex justify-center items-center":"border-[1px] border-[#E6E6E6]"}`,children:l&&(l!=null&&l.data)&&((J=l==null?void 0:l.data)==null?void 0:J.length)===0?`${v||C||k||_||S}」に一致する結果はありません。別のキーワードをお試しください`:t.jsx(ve,{data:de,columns:he,theme:w,layout:{custom:!0,horizontalScroll:!0}})}),t.jsxs("div",{className:"col-span-12 bg-[#F5F5F5] h-[60px] flex justify-center items-center gap-2 mt-[50px]",children:[t.jsx("div",{className:"flex gap-1",children:l&&(l==null?void 0:l.data)&&((K=l==null?void 0:l.data)==null?void 0:K.length)!==0&&ge.map((e,s)=>{var a;return t.jsx("button",{className:`border w-[25px] ${((a=l==null?void 0:l.data)==null?void 0:a.length)>0,p===e?"bg-primary text-white":"bg-white"} border-[#DCDCDC]`,onClick:()=>A(e),children:e},s)})}),D<((G=l==null?void 0:l.pagination)==null?void 0:G.totalPages)||((H=n==null?void 0:n.pagination)==null?void 0:H.totalPages)&&((Q=l==null?void 0:l.pagination)==null?void 0:Q.totalPages)<1&&t.jsxs("div",{className:"flex gap-1 items-center cursor-pointer",onClick:()=>A(D),children:[t.jsx("div",{className:"font-[500] text-primary text-[16px] w-full",children:"次ページ"}),t.jsx("svg",{className:"",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"18",viewBox:"0 0 16 18",fill:"none",children:t.jsx("path",{d:"M15.4318 9L0.138137 17.6603L0.138138 0.339745L15.4318 9Z",fill:"#255BB3"})})]})]})]})]}),t.jsx(_e,{isDeleteModal:le,setIsDeleteModal:B,id:g})]})};export{Te as default};
