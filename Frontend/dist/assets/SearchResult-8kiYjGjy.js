import{u as R,d as M,r as I,j as e,p as L,z as Y,R as _,a as z,s as Z,S as G}from"./index-w2wx-x_X.js";import{S as T}from"./StatCalender-wz3wZoHT.js";import{F as U}from"./index.esm-3p37yvGm.js";import{N as q}from"./No_Image_Available-oKBWNq14.js";import{R as V}from"./RatingSystem-xm_1z6H-.js";import{d as A}from"./dayjs.min-5rCsLmx2.js";import{F as H,I as J}from"./index.esm-6lvFD6lQ.js";import"./cn-hWSFJXCx.js";import"./iconBase-7AsOp5YA.js";import"./Rating-jxWQdIu8.js";import"./objectWithoutPropertiesLoose-9Q1jwsKS.js";import"./extends-_9I-EFOp.js";import"./emotion-react.browser.esm-kI5PoqX3.js";import"./hoist-non-react-statics.cjs-j2Vrlo-h.js";function K({grid:x,process:t}){var h,f,o,y,k,E,F,D,u,$,a,p,c,g,P,j,w,N,v,C,b;const s=R(),S=M(),[n,d]=I.useState((h=t==null?void 0:t.process)==null?void 0:h.img1),m=()=>{var l;s(`/process/details/${(l=t==null?void 0:t.process)==null?void 0:l._id}`)};console.log("Process in search",t);const r=l=>{const i=l.target;i.src=q};return e.jsxs("div",{className:` w-full   border-[1px] border-[#E6E6E6] p-0 sm:p-4 shadow-sm   ${x?"flex flex-col justify-between sm:justify-start":"grid md:grid-cols-[2fr,3fr,2fr] lg:grid-cols-[1fr,3fr,1fr] sm:gap-3"}`,children:[e.jsxs("div",{children:[e.jsx("img",{src:n,alt:"ProcessImg",className:"w-full object-cover",onError:r}),e.jsxs("div",{className:x?"hidden":" hidden sm:grid grid-cols-3 gap-[6px] mt-[6px]",children:[e.jsx("img",{src:(f=t==null?void 0:t.process)==null?void 0:f.img1,alt:"ProcessImg",onClick:()=>{var l;return d((l=t==null?void 0:t.process)==null?void 0:l.img1)},className:"cursor-pointer",onError:r}),e.jsx("img",{src:(o=t==null?void 0:t.process)==null?void 0:o.img2,onClick:()=>{var l;return d((l=t==null?void 0:t.process)==null?void 0:l.img2)},alt:"ProcessImg",className:"cursor-pointer",onError:r}),e.jsx("img",{src:(y=t==null?void 0:t.process)==null?void 0:y.img3,onClick:()=>{var l;return d((l=t==null?void 0:t.process)==null?void 0:l.img3)},alt:"ProcessImg",className:"cursor-pointer",onError:r})]})]}),e.jsxs("div",{className:x?"sm:px-0 px-4 mt-4":"p-4",children:[e.jsx("h1",{className:`text-[#255BB3] no-underline sm:text-[20px] text-[16px] font-[700]  cursor-pointer  line-clamp-1 ${x?"":"sm:underline"}`,onClick:m,children:(k=t==null?void 0:t.process)==null?void 0:k.name}),e.jsxs("div",{className:`flex lg:flex-row xs:flex-col ${x?"lg:gap-10 xs:gap-2":"lg:gap-8 xs:gap-2"} mt-2 `,children:[e.jsx("h1",{className:`sm:text-[16px] text-[12px] text-[#808080] font-[500] underline cursor-pointer  line-clamp-1 ${x?"sm:block hidden":""}`,onClick:()=>{var l,i;return s(`/process/company-profile/${(i=(l=t==null?void 0:t.process)==null?void 0:l.user)==null?void 0:i._id}`)},children:(F=(E=t==null?void 0:t.process)==null?void 0:E.user)==null?void 0:F.name01}),e.jsxs("div",{className:"flex lg:gap-2 xs:gap-1 items-center ",children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16",fill:"none",children:[e.jsx("g",{"clip-path":"url(#clip0_1241_5287)",children:e.jsx("path",{d:"M6.57895 7.71333C6.97368 7.71333 7.31497 7.57884 7.59457 7.30591C7.87418 7.03298 8.01809 6.70862 8.01809 6.32493C8.01809 5.94124 7.87829 5.61689 7.59457 5.34791C7.31086 5.07893 6.97368 4.94049 6.57484 4.94049C6.17599 4.94049 5.83882 5.07498 5.55921 5.34791C5.27961 5.62084 5.13569 5.9452 5.13569 6.32889C5.13569 6.71258 5.27549 7.03693 5.55921 7.30591C5.84293 7.57489 6.1801 7.71333 6.57895 7.71333ZM6.57895 15.8222C4.37089 14.0145 2.72204 12.3374 1.6324 10.7868C0.542763 9.23622 0 7.80431 0 6.48711C0 4.50933 0.662007 2.93502 1.98602 1.76022C3.30592 0.585422 4.83964 0 6.57895 0C8.31826 0 9.85197 0.585422 11.176 1.76022C12.5 2.93502 13.162 4.50933 13.162 6.48711C13.162 7.80431 12.6151 9.24018 11.5255 10.7908C10.4359 12.3413 8.78701 14.0185 6.57895 15.8262V15.8222Z",fill:"#808080"})}),e.jsx("defs",{children:e.jsx("clipPath",{id:"clip0_1241_5287",children:e.jsx("rect",{width:"13.1579",height:"15.8222",fill:"white"})})})]}),e.jsx("h1",{className:"sm:text-[16px] text-[12px] text-[#808080] font-[400] ",children:`${(D=t==null?void 0:t.process)!=null&&D.pref?((u=t==null?void 0:t.process)==null?void 0:u.pref)+", ":""}${($=t==null?void 0:t.process)!=null&&$.mun?(a=t==null?void 0:t.process)==null?void 0:a.mun:""}`})]})]}),e.jsxs("div",{className:" grid grid-cols-1 gap-2 sm:pb-0 pb-4 w-full sm:w-fit mt-2",children:[e.jsx(V,{averageRating:((p=t==null?void 0:t.process)==null?void 0:p.totalRatingSum)||0,totalRatings:((c=t==null?void 0:t.process)==null?void 0:c.totalReviews)||0}),e.jsx("div",{className:`flex flex-wrap gap-2 row-start-2 ${x?"":"sm:row-start-2"}`,children:((g=t==null?void 0:t.process)==null?void 0:g.tags)&&((j=(P=t==null?void 0:t.process)==null?void 0:P.tags)==null?void 0:j.map((l,i)=>e.jsx("h2",{className:`text-[12px] ${x&&"text-[10px] sm:text-[12px]"}  text-[#FA0] font-[700]  py-[1px]  px-[15px] text-center my-auto rounded-full bg-[#FFF4DF] line-clamp-1 cursor-pointer`,onClick:()=>{S(L({keyword:l,pageSize:12})),s(`/process/search-results?keyword=${l}`)},children:l},i)))})]}),e.jsxs("div",{className:`flex items-start gap-3 sm:mt-4  ${x?"hidden sm:flex":"flex"}`,children:[e.jsx("h2",{className:"bg-[#E6E6E6] text-center font-[500] p-1 sm:text-[14px] text-[12px] text-[#808080] w-[60px]",children:"工程"}),e.jsx("h2",{className:"sm:text-[14px] text-[12px] text-[#808080] font-[400] w-4/5 line-clamp-3",children:(w=t==null?void 0:t.process)==null?void 0:w.process_explanation})]}),e.jsxs("div",{className:`flex items-start gap-3 mt-4 ${x?"hidden sm:flex":"flex"}`,children:[e.jsx("h2",{className:"bg-[#E6E6E6] text-center font-[500] p-1 sm:text-[14px] text-[12px] text-[#808080] w-[60px]  ",children:"能力"}),e.jsx("h2",{className:"sm:text-[14px] text-[12px] text-[#808080] font-[400] w-4/5 line-clamp-2",children:(N=t==null?void 0:t.process)==null?void 0:N.capacity})]}),e.jsxs("div",{className:`flex items-center gap-3 mt-4 ${x?"hidden sm:flex":"flex"}`,children:[e.jsx("h2",{className:"bg-[#E6E6E6] text-center font-[500] p-1 sm:text-[14px] text-[12px] text-[#808080] w-[60px]",children:"納期"}),e.jsx("h2",{className:"sm:text-[14px] text-[12px] text-[#808080] font-[400] w-4/5  line-clamp-1 ",children:(v=t==null?void 0:t.process)==null?void 0:v.delivery_date})]}),e.jsxs("div",{className:`flex items-center gap-3 mt-4  bg-[#FFF4DF] w-full  py-2 px-2 ${x?"hidden sm:flex":"flex"}`,children:[e.jsx("h2",{className:"bg-[#FFAA00] text-center font-[500] p-1 sm:text-[14px] text-[12px] text-[#fff] w-[80px] py-1",children:"価格"}),e.jsx("div",{className:"flex  items-center py-2  w-full",children:e.jsx("h2",{className:"sm:text-[14px] text-[14px] text-[#FFAA00] font-[400] w-4/5  line-clamp-1 ",children:(C=t==null?void 0:t.process)!=null&&C.unit_price?(b=t==null?void 0:t.process)==null?void 0:b.unit_price:"N/A"})})]})]}),e.jsx("div",{className:x?"hidden":" hidden sm:block md:pt-4",children:e.jsx(T,{value:t})}),e.jsx("div",{className:"w-full px-2 pb-2 sm:hidden",children:e.jsxs("button",{onClick:m,className:"bg-[#255BB3] text-center w-full text-[#fff] p-2 flex items-center justify-center gap-2 font-bold",children:["空き状況 ",e.jsx(U,{})]})})]})}function rt(){var w,N,v,C,b,l;const x=R(),[t,s]=I.useState(!1),S=Y(),n=new URLSearchParams(S.search),d=n.get("page"),[m,r]=_.useState(d?parseInt(d):1),h=n.get("startDate")?n.get("startDate"):"",f=n.get("endDate")?n.get("endDate"):"",o=n.get("keyword")?n.get("keyword"):"",y=n.get("cat")?n.get("cat"):"",k=n.get("subCat")?n.get("subCat"):"",E=n.get("pref")?n.get("pref"):"",F=n.get("mun")?n.get("mun"):"",D=R(),u=M(),{loading:$,process:a}=z(Z),p=10,c=Math.max(1,((w=a==null?void 0:a.pagination)==null?void 0:w.currentPage)-Math.floor(p/2)),g=Math.min((N=a==null?void 0:a.pagination)==null?void 0:N.totalPages,c+p-1),P=Array.from({length:g-c+1},(i,B)=>c+B);_.useEffect(()=>{window.scrollTo(0,0)},[m]),_.useEffect(()=>{u(L({startDate:A(h).format("YYYY-MM-DD"),endDate:A(f).format("YYYY-MM-DD"),keyword:o,cat:y,subCat:k,pref:E,mun:F,page:m,pageSize:12}))},[m,u]),console.log(a);const j=async i=>{r(i),D(`/process/search-results?page=${i}&startDate=${h}&endDate=${f}&keyword=${o}`)};return console.log("search result",a),e.jsx(e.Fragment,{children:$?e.jsx(G,{}):e.jsxs("div",{className:" mx-auto md:block max-w-[1200px] w-full xs:px-4 sm:px-6 md:px-8 xs:py-3 md:py-5 lg:py-6 mt-10",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsxs("h1",{className:"text-[#255BB3] text-[24px] hidden sm:block  font-[700] pr-4",children:["工程検索結果"," "]}),e.jsxs("span",{className:"text-[#808080] text-[16px] font-[700] ml-4",children:["該当件数：",(v=a==null?void 0:a.pagination)==null?void 0:v.totalItems,"件"]}),e.jsxs("button",{onClick:()=>x("/process/advance-search"),className:"bg-[#255BB3] text-[#fff] rounded-sm p-2 text-[14px] font-[700] ml-5 hidden sm:flex items-center gap-2",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"12",viewBox:"0 0 14 12",fill:"none",children:e.jsx("path",{d:"M7 11.2998L0.937822 0.799805L13.0622 0.799804L7 11.2998Z",fill:"white"})})," ","条件で絞り込む"]})]}),e.jsxs("div",{className:"flex gap-3 items-center",children:[e.jsx(H,{className:"cursor-pointer",onClick:()=>s(!1),size:20,color:t&&"#808080"}),e.jsx(J,{className:"cursor-pointer",onClick:()=>s(!0),size:20,color:!t&&"#808080"})]})]}),e.jsx("div",{className:t?"grid grid-cols-2 sm:grid-cols-3 sm:gap-4 gap-2 mt-[30px]":"grid grid-cols-1 gap-4 mt-[30px]",children:a!=null&&a.data&&(a==null?void 0:a.data.length)>0?(C=a==null?void 0:a.data)==null?void 0:C.map(i=>e.jsx(K,{process:i,grid:t,setGrid:s},i._id)):e.jsx("div",{className:"col-span-12 text-primary text-center text-[32px] font-bold flex justify-center items-center h-screen",children:"表示するデータがありません"})}),((b=a==null?void 0:a.data)==null?void 0:b.length)>0&&e.jsxs("div",{className:"col-span-12 bg-[#F5F5F5] h-[60px] flex justify-center items-center gap-2 mt-[50px]",children:[e.jsx("div",{className:"flex gap-1",children:P.map((i,B)=>e.jsx("button",{className:`border w-[25px] ${m===i?"bg-primary text-white":"bg-white"} border-[#DCDCDC]`,onClick:()=>j(i),children:i},B))}),g<((l=a==null?void 0:a.pagination)==null?void 0:l.totalPages)&&e.jsxs("div",{className:"flex gap-1 items-center cursor-pointer",onClick:()=>j(g+1),children:[e.jsx("div",{className:"font-[500] text-primary text-[16px] w-full",children:"次ページ"}),e.jsx("svg",{className:"",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"18",viewBox:"0 0 16 18",fill:"none",children:e.jsx("path",{d:"M15.4318 9L0.138137 17.6603L0.138138 0.339745L15.4318 9Z",fill:"#255BB3"})})]})]})]})})}export{rt as default};
