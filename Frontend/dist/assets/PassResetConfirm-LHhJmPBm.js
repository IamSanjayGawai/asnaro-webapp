import{u as f,d as w,t as h,r as b,j as s,S as j,v as m}from"./index-w2wx-x_X.js";import{u as y}from"./index.esm-aRdTVIgd.js";import{Q as a}from"./react-toastify.esm-DWx9woOs.js";const P=()=>{const o=f(),i=w(),[x]=h(),r=x.get("token"),{register:d,handleSubmit:c,formState:{errors:t,isSubmitting:l},watch:n}=y();b.useEffect(()=>{r||(a.error("Password reset token is invalid or has expired."),o("/password-reset"))},[r,o]);const p=async e=>{if(e.password!==e.passwordConfirm){a.error("Passwords do not match.");return}if(console.log(e.password,"111111111111"),console.log(r,"111111111111"),r){const u=await i(m({resetToken:r,newPassword:e.password}));m.fulfilled.match(u)?(a.success("Your password has been reset successfully."),o("/reset-success")):a.error("Failed to reset password. Please try again.")}};return s.jsx(s.Fragment,{children:s.jsx("div",{className:"md:mx-auto md:w-[600px] bg-light my-[100px] xs:mx-4",children:s.jsx("div",{className:"h-full",children:s.jsx("div",{className:"md:w-[590px] md:mx-auto md:py-[50px] xs:py-[26px] xs:mx-4 text-base",children:s.jsxs("form",{onSubmit:c(p),className:"w-full md:px-[70px]",children:[s.jsx("div",{className:"text-primary font-bold text-center xs:text-[20px] md:text-2xl ",children:"パスワード再設定"}),s.jsx("div",{className:"text-tertiary text-left text-base xs:mt-[28px] md:mt-[50px] mb-[25px]",children:"再設定後のパスワードを入力してください。"}),s.jsxs("div",{className:"w-full password flex flex-col place-items-start justify-center xs:mt-[2px] xs:mb-[7px] md:mt-1 md:mb-[10px]",children:[s.jsx("label",{className:"text-tertiary font-[500]",children:"パスワード"}),s.jsx("input",{type:"password",className:"w-full h-[45px] p-2 border border-secondary",...d("password",{required:"Password is required",minLength:{value:8,message:"Password must be at least 8 characters"}})}),t.password&&s.jsx("p",{className:"text-red-600",children:t.password.message})]}),s.jsxs("div",{className:"w-full cpassword flex flex-col place-items-start justify-center xs:mb-[15px] md:mb-[30px]",children:[s.jsx("label",{className:"text-tertiary font-[500]",children:"パスワード(再入力)"}),s.jsx("input",{type:"password",className:"w-full h-[45px] p-2 border border-secondary",...d("passwordConfirm",{validate:e=>e===n("password")||"Passwords do not match"})}),t.passwordConfirm&&s.jsx("p",{className:"text-red-600",children:t.passwordConfirm.message})]}),s.jsx("button",{className:"w-full btn p-2flex place-items-center justify-center	bg-primary text-white h-[45px] font-bold xs:rounded md:rounded-md",type:"submit",disabled:l,children:l?s.jsx(j,{className:"h-full"}):"パスワードを再設定する"})]})})})})})};export{P as default};
