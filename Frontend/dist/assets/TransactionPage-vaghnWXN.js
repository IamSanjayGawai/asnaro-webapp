import{u as Iu,n as Pu,d as $u,r as t,a as Lu,B as Mu,ag as Qu,ah as Lt,h as g,a8 as b,ai as Gu,aj as Mt,ak as Ou,U as Vu,j as l,S as B,al as Uu,am as Hu,an as Ku,V as zu,ao as Zu}from"./index-w2wx-x_X.js";import{K as Qt}from"./baseline-5AKzli58.js";import{d as Oe,a as Ve,b as Gt,S as Ju,c as Wu,R as Xu,e as Yu,C as Ot,t as Vt,T as hu,H as ed,f as sd,g as ld}from"./RefundModal-n-hWL-AL.js";import{D as Ue,a as He,b as Ke,c as ze,d as Ze,e as Je,f as Ut,g as Ht,h as Kt,i as zt,j as Zt}from"./downloadHelpRefundSystem-tXTfCQte.js";import"./emotion-react.browser.esm-kI5PoqX3.js";import"./hoist-non-react-statics.cjs-j2Vrlo-h.js";import"./extends-_9I-EFOp.js";import"./assertThisInitialized-4q6YPdh3.js";import"./memoize-one.esm-oV5jpQgL.js";import"./setPrototypeOf-ahVgEFUp.js";import"./index.esm-y_8cUbAG.js";import"./iconBase-7AsOp5YA.js";import"./Rating-jxWQdIu8.js";import"./objectWithoutPropertiesLoose-9Q1jwsKS.js";const ad=()=>{var ml,fl,cl,yl,al,_l,wl,vl,bl,Al,jl,Rl,Sl,Nl,Cl,Bl,Tl,Fl,ql,El,kl,Dl,Il,Pl,$l,Ll,Ml,Ql,Gl,Ol,Vl,Ul,Hl,Kl,zl,Zl,Jl,Wl,Xl,Yl,hl,en,sn,ln,nn,rn,tn,xn,un,dn,on,pn,gn,mn,fn,cn,yn,an,_n,wn,vn,bn,An,jn,Rn,Sn,Nn,Cn,Bn,Tn,Fn,qn,En,kn,Dn,In,Pn,$n,Ln,Mn,Qn,Gn,On,Vn,Un,Hn,Kn,zn,Zn,Jn,Wn,Xn,Yn,hn,er,sr,lr,nr,rr,tr,xr,ur,dr,or,pr,ir,gr,mr,fr,cr,yr,ar,_r,wr,vr,br,Ar,jr,Rr,Sr,Nr,Cr,Br,Tr,Fr,qr,Er,kr,Dr,Ir,Pr,$r,Lr,Mr,Qr,Gr,Or,Vr,Ur,Hr,Kr,zr,Zr,Jr,Wr,Xr,Yr,hr,et,st,lt,nt,rt,tt,xt,ut,dt,ot,pt,it,gt,mt,ft,ct,yt,at,_t,wt,vt,bt,At,jt,Rt,St,Nt,Ct,Bt,Tt;const $=Iu(),{id:c}=Pu(),f=$u(),oe=t.useRef(null),Be=t.useRef(null),[le,We]=t.useState(!1),[Xe,Jt]=t.useState(!1),[Wt,Xt]=t.useState(!1),[Yt,ht]=t.useState(!1),[ex,sx]=t.useState(!1),[lx,Ye]=t.useState(!1),[nx,he]=t.useState(!1),[es,K]=t.useState(!1),[rx,ss]=t.useState(!1),[tx,ls]=t.useState(!1),[xx,ns]=t.useState(!1),[ux,pe]=t.useState(!1),[rs,ne]=t.useState(!1),[ts,xs]=t.useState(!1),[dx,ie]=t.useState(!1),[ox,ge]=t.useState(!1),[px,me]=t.useState(!1),[ix,fe]=t.useState(!1),[gx,us]=t.useState(!1),[L,ds]=t.useState(!1),[re,os]=t.useState(!1),[Te,ps]=t.useState(!1),[mx,is]=t.useState(!1),[fx,gs]=t.useState(!1),[cx,ms]=t.useState(!1),[yx,fs]=t.useState(!1),[ax,cs]=t.useState(!1),[_x,ys]=t.useState(!1),[wx,as]=t.useState(!1),[_s,vx]=t.useState(0),[ws,bx]=t.useState(0),[vs,Ax]=t.useState(0),[bs,jx]=t.useState(0),[As,Rx]=t.useState(0),[js,Sx]=t.useState(0),[Fe,m]=t.useState([]),[z,qe]=t.useState(""),[Z,Rs]=t.useState(null),[Ss,Nx]=t.useState(""),[Ns,Cx]=t.useState(""),[Cs,Bx]=t.useState(""),[Bs,Tx]=t.useState(""),[Ts,Fx]=t.useState(""),[Fs,qx]=t.useState(""),[qs,Ex]=t.useState(""),[Es,kx]=t.useState(""),[ks,Dx]=t.useState(""),[Ds,Ix]=t.useState(""),[Is,Px]=t.useState(""),[Ps,$x]=t.useState(),[$s,Lx]=t.useState(),[Ls,Mx]=t.useState(),[Ms,Qx]=t.useState(),[Qs,Gx]=t.useState(),[Gs,Ox]=t.useState(),[Os,Vx]=t.useState(),[Vs,Ux]=t.useState(),[Us,Hx]=t.useState(),[Hs,Kx]=t.useState(),[Ks,zx]=t.useState(),[zs,Zs]=t.useState(!1),[Zx,Ee]=t.useState(!1),{transaction:s,loading:Jx,registerContent:Wx,firstTimeAfterPayment:Xx,estimateLoading:te,refundLoading:Js,quatation:J,estimateTable:a,refundTable:j,refundHit:ke,taxData:W,taxDetails:i,RefundTaxDetails:d,ordererdAgree:Yx,contractSigned:hx,reviewModalShow:Ws,cancelModalshow:Xs}=Lu(Mu),eu=Xe||((ml=s==null?void 0:s.transaction)==null?void 0:ml.quotationRequested),su=Wt||((fl=s==null?void 0:s.transaction)==null?void 0:fl.quotationSent),M=Yt||((cl=s==null?void 0:s.transaction)==null?void 0:cl.quotationReceived),Q=ex||((yl=s==null?void 0:s.transaction)==null?void 0:yl.reQuoteRequested),lu=lx||((al=s==null?void 0:s.transaction)==null?void 0:al.reQuoteReceived),G=nx||((_l=s==null?void 0:s.transaction)==null?void 0:_l.reQuoteSent),ce=es||((wl=s==null?void 0:s.transaction)==null?void 0:wl.orderer_agree),O=tx||((vl=s==null?void 0:s.transaction)==null?void 0:vl.contractSigned),Ys=xx||((bl=s==null?void 0:s.transaction)==null?void 0:bl.paymentDeposit),hs=rs||((Al=s==null?void 0:s.transaction)==null?void 0:Al.delivery_status)===1,De=ts||((jl=s==null?void 0:s.transaction)==null?void 0:jl.delivery_status)===3,Ie=ox||((Rl=s==null?void 0:s.transaction)==null?void 0:Rl.agreedToCancel),el=px||((Sl=s==null?void 0:s.transaction)==null?void 0:Sl.refundRequested),Pe=ix||((Nl=s==null?void 0:s.transaction)==null?void 0:Nl.refundTransferred),[x,nu]=t.useState([]),[T,ru]=t.useState([]),[w,tu]=t.useState(),u=(Cl=s==null?void 0:s.transaction)==null?void 0:Cl.quotation,$e=((Bl=s==null?void 0:s.transaction)==null?void 0:Bl.adminTax)!==0?(Tl=s==null?void 0:s.transaction)==null?void 0:Tl.adminTax:W&&W.tax?W.tax:10,Le=((El=(ql=(Fl=s==null?void 0:s.transaction)==null?void 0:Fl.refund)==null?void 0:ql.taxDetails)==null?void 0:El.adminRefundTax)!==0?(Il=(Dl=(kl=s==null?void 0:s.transaction)==null?void 0:kl.refund)==null?void 0:Dl.taxDetails)==null?void 0:Il.adminRefundTax:W&&W.tax?W.tax:10,sl=t.useRef(!1),F=Ss||s&&((Pl=s==null?void 0:s.transaction)==null?void 0:Pl.estimation_pdf),ye=Ns||s&&(($l=s==null?void 0:s.transaction)==null?void 0:$l.advance_payment_invoice),q=Cs||s&&((Ll=s==null?void 0:s.transaction)==null?void 0:Ll.order_form),E=Bs||s&&((Ml=s==null?void 0:s.transaction)==null?void 0:Ml.delivery_slip),k=Ts||s&&((Ql=s==null?void 0:s.transaction)==null?void 0:Ql.Receipt),D=Fs||s&&((Gl=s==null?void 0:s.transaction)==null?void 0:Gl.acceptance_letter),ae=qs||s&&((Ol=s==null?void 0:s.transaction)==null?void 0:Ol.transaction_invoice),_e=Ds||s&&((Vl=s==null?void 0:s.transaction)==null?void 0:Vl.refund_transaction_invoice),we=Es||s&&((Ul=s==null?void 0:s.transaction)==null?void 0:Ul.system_fee_invoice),ll=Is||s&&((Hl=s==null?void 0:s.transaction)==null?void 0:Hl.refund_system_fee_invoice),xe=ks||s&&((Kl=s==null?void 0:s.transaction)==null?void 0:Kl.refund_invoice),[xu,uu]=t.useState(!1);console.log(xe,"isBlueButtonForRefundInvoice........");const X=u&&u.concat((T==null?void 0:T.length)>0?T:!ke&&j?j:(Zl=(zl=s==null?void 0:s.transaction)==null?void 0:zl.refund)==null?void 0:Zl.tableData),Y=(T==null?void 0:T.length)>0?T:!ke&&j?j:(Wl=(Jl=s==null?void 0:s.transaction)==null?void 0:Jl.refund)==null?void 0:Wl.tableData;function A(e){return e===null?"":e.toLocaleString("ja-JP")}const y=e=>{if(!e||typeof e!="string")return e;const r=parseFloat(e.replace(/,/g,""));return isNaN(r)?0:r},ue={nodes:x&&Array.isArray(x)&&(x==null?void 0:x.length)>0?x.map((e,r)=>({id:r.toString(),amount:e==null?void 0:e.price,content:e==null?void 0:e.item_name,deadline:e==null?void 0:e.deadline,drawingNumber:e==null?void 0:e.drawing_number,quantity:e==null?void 0:e.quantity,unit:e==null?void 0:e.unit,unitPrice:e==null?void 0:e.unit_price,taxAmount:e==null?void 0:e.taxAmount,totalAmountIncludingTax:e==null?void 0:e.totalAmountIncludingTax,totalamountExcludingTax:e==null?void 0:e.totalamountExcludingTax})):!Wx&&J&&Array.isArray(J)&&(J==null?void 0:J.length)>0?J.map((e,r)=>({id:r.toString(),amount:e.price,content:e.item_name,deadline:e.deadline?new Date(e.deadline).toISOString().slice(0,10):null,drawingNumber:e.drawing_number,quantity:e.quantity,unit:e.unit,unitPrice:e.unit_price,taxAmount:e.taxAmount,totalAmountIncludingTax:e.totalAmountIncludingTax,totalamountExcludingTax:e.totalamountExcludingTax})):a&&Array.isArray(a)&&a.length>0?a.map((e,r)=>({id:r.toString(),amount:A(e.amount),content:e.content,deadline:e.deadline,drawingNumber:e.drawingNumber,quantity:e.quantity,unit:e.unit,unitPrice:e.unitPrice,totalAmountIncludingTax:e.totalAmountIncludingTax,totalamountExcludingTax:e.totalamountExcludingTax})):u&&Array.isArray(u)&&(u==null?void 0:u.length)>0?u.map((e,r)=>({id:r.toString(),amount:e==null?void 0:e.price,content:e==null?void 0:e.item_name,deadline:e!=null&&e.deadline?new Date(e==null?void 0:e.deadline).toISOString().split("T")[0]:null,drawingNumber:e==null?void 0:e.drawing_number,quantity:e==null?void 0:e.quantity,unit:e==null?void 0:e.unit,unitPrice:e==null?void 0:e.unit_price,taxAmount:e==null?void 0:e.taxAmount,totalAmountIncludingTax:e==null?void 0:e.totalAmountIncludingTax,totalamountExcludingTax:e==null?void 0:e.totalamountExcludingTax})):le?Oe.nodes:Ve.nodes},du={nodes:X&&Array.isArray(X)&&(X==null?void 0:X.length)>0?X.map((e,r)=>({id:r.toString(),amount:e!=null&&e.amount?`-${A(y(e==null?void 0:e.amount))}`:e==null?void 0:e.price,content:(e==null?void 0:e.item_name)||(e==null?void 0:e.content),deadline:e!=null&&e.deadline?new Date(e==null?void 0:e.deadline).toISOString().split("T")[0]:null,drawingNumber:e==null?void 0:e.drawing_number,quantity:e==null?void 0:e.quantity,unit:e==null?void 0:e.unit,unitPrice:e==null?void 0:e.unit_price,taxAmount:e==null?void 0:e.taxAmount,totalAmountIncludingTax:e==null?void 0:e.totalAmountIncludingTax,totalamountExcludingTax:e==null?void 0:e.totalamountExcludingTax})):le?Oe.nodes:Ve.nodes},ou={nodes:Y&&Array.isArray(Y)&&(Y==null?void 0:Y.length)>0?Y.map((e,r)=>({id:r.toString(),amount:e==null?void 0:e.amount,content:e==null?void 0:e.content})):le?Gt.nodes:Ve.nodes};t.useEffect(()=>{var e;(s||xu)&&f(Qu((e=s==null?void 0:s.transaction)==null?void 0:e.quotation))},[f,(Xl=s==null?void 0:s.transaction)==null?void 0:Xl.quotation,s]),t.useEffect(()=>{v()},[f,c,Yx,hx,es,rs,ts,dx,gx,Zx]),t.useEffect(()=>{_s!==0&&Ue(s)},[_s]),t.useEffect(()=>{ws!==0&&He(s)},[ws]),t.useEffect(()=>{vs!==0&&Ke(s)},[vs]),t.useEffect(()=>{bs!==0&&ze(s)},[bs]),t.useEffect(()=>{As!==0&&Ze(s)},[As]),t.useEffect(()=>{js!==0&&Je(s)},[js]),t.useEffect(()=>{oe.current&&(oe.current.scrollTop=oe.current.scrollHeight),Be.current&&Be.current.focus()},[Fe,s]),t.useEffect(()=>{var e,r,p,o,_;window.scrollTo(0,0),s&&((r=(e=s==null?void 0:s.transaction)==null?void 0:e.conversation)==null?void 0:r.length)>0&&m((o=(p=s==null?void 0:s.transaction)==null?void 0:p.conversation)==null?void 0:o.map(n=>{var N,C,R,S;return n!=null&&n.file_path?{sender_name:(N=n==null?void 0:n.sender_id)==null?void 0:N.name01,sender_pic:(C=n==null?void 0:n.sender_id)==null?void 0:C.profile_img,message:n==null?void 0:n.file_name,file_path:n==null?void 0:n.file_path,first_msg:n==null?void 0:n.first_msg,seller_quote:n==null?void 0:n.seller_quote,buyer_reQuote:n==null?void 0:n.buyer_reQuote,buyer_Agree:n==null?void 0:n.buyer_Agree,contract_sign:n==null?void 0:n.contract_sign,paymentDeposited:n==null?void 0:n.paymentDeposited,deliveryCompleted:n==null?void 0:n.deliveryCompleted,receiptGenerated:n==null?void 0:n.receiptGenerated,deliverySentBack:n==null?void 0:n.deliverySentBack,deliveryAccepted:n==null?void 0:n.deliveryAccepted,cancelRequest:n==null?void 0:n.cancelRequest,cancelAgree:n==null?void 0:n.cancelAgree,requestRefund:n==null?void 0:n.requestRefund,refundTermsAgree:n==null?void 0:n.refundTermsAgree,cancelRefundRequest:n==null?void 0:n.cancelRefundRequest}:{sender_name:(R=n==null?void 0:n.sender_id)==null?void 0:R.name01,sender_pic:(S=n==null?void 0:n.sender_id)==null?void 0:S.profile_img,message:n==null?void 0:n.note,first_msg:n==null?void 0:n.first_msg,seller_quote:n==null?void 0:n.seller_quote,buyer_reQuote:n==null?void 0:n.buyer_reQuote,buyer_Agree:n==null?void 0:n.buyer_Agree,contract_sign:n==null?void 0:n.contract_sign,paymentDeposited:n==null?void 0:n.paymentDeposited,deliveryCompleted:n==null?void 0:n.deliveryCompleted,receiptGenerated:n==null?void 0:n.receiptGenerated,deliverySentBack:n==null?void 0:n.deliverySentBack,deliveryAccepted:n==null?void 0:n.deliveryAccepted,cancelRequest:n==null?void 0:n.cancelRequest,cancelAgree:n==null?void 0:n.cancelAgree,requestRefund:n==null?void 0:n.requestRefund,refundTermsAgree:n==null?void 0:n.refundTermsAgree,cancelRefundRequest:n==null?void 0:n.cancelRefundRequest}})),(_=s==null?void 0:s.transaction)!=null&&_.paymentDeposit&&Xx&&(au(),f(Lt(!1)))},[s]),t.useEffect(()=>{sl.current||(g.emit("join",c),g.on("newMessage",e=>{f(b(!0)),e.file_path?m(r=>[...r,{sender_name:e.sender_name,sender_pic:e.sender_pic,message:e.message,file_path:e.file_path,first_msg:e.first_msg,seller_quote:e.seller_quote,buyer_reQuote:e.buyer_reQuote,buyer_Agree:e.buyer_Agree,contract_sign:e.contract_sign,paymentDeposited:e.paymentDeposited,deliveryCompleted:e.deliveryCompleted,receiptGenerated:e.receiptGenerated,deliverySentBack:e.deliverySentBack,deliveryAccepted:e.deliveryAccepted,cancelRequest:e.cancelRequest,cancelAgree:e.cancelAgree,requestRefund:e.requestRefund,refundTermsAgree:e.refundTermsAgree,cancelRefundRequest:e.cancelRefundRequest}]):m(r=>[...r,{sender_name:e.sender_name,sender_pic:e.sender_pic,message:e.message,first_msg:e.first_msg,seller_quote:e.seller_quote,buyer_reQuote:e.buyer_reQuote,buyer_Agree:e.buyer_Agree,contract_sign:e.contract_sign,paymentDeposited:e.paymentDeposited,deliveryCompleted:e.deliveryCompleted,receiptGenerated:e.receiptGenerated,deliverySentBack:e.deliverySentBack,deliveryAccepted:e.deliveryAccepted,cancelRequest:e.cancelRequest,cancelAgree:e.cancelAgree,requestRefund:e.requestRefund,refundTermsAgree:e.refundTermsAgree,cancelRefundRequest:e.cancelRefundRequest}])}),g.on("newMessageQuote",e=>{e.estimatePdf&&Nx(e.estimatePdf),e.transaction&&$x(e.transaction),ht(!0),K(!1),nu(e.estimateTable),he(e.reQuoteSent),f(b(!0)),console.log("QuoteData",e),m(r=>[...r,{sender_name:e.sender_name,sender_pic:e.sender_pic,message:e.message,file_path:e.file_path,seller_quote:e.seller_quote}])}),g.on("newMessageReQuote",e=>{Ye(!0),K(!1),f(b(!0)),console.log("QuoteData",e),m(r=>[...r,{sender_name:e.sender_name,sender_pic:e.sender_pic,message:e.message,buyer_reQuote:e.buyer_reQuote}])}),g.on("newMessageAgee",e=>{K(!0),f(b(!0)),m(r=>[...r,{sender_name:e.sender_name,sender_pic:e.sender_pic,message:e.message,file_path:e.file_path,buyer_Agree:e.buyer_Agree}])}),g.on("newMessageContractSign",e=>{ls(!0),f(b(!0)),m(r=>[...r,{sender_name:e.sender_name,sender_pic:e.sender_pic,message:e.message,file_path:e.file_path,buyer_Agree:e.buyer_Agree,contract_sign:e.contract_sign}])}),g.on("newMessagePayment",e=>{e.advancePaymentPdf&&Cx(e.advancePaymentPdf),e.orderFormPdf&&Bx(e.orderFormPdf),e.transaction&&Lx(e.transaction),e.transaction&&Mx(e.transaction),pe(!0),ns(!0),f(b(!0)),m(r=>[...r,{sender_name:e.sender_name,sender_pic:e.sender_pic,message:e.message,file_path:e.file_path,buyer_Agree:e.buyer_Agree,contract_sign:e.contract_sign,paymentDeposited:e.paymentDeposited}])}),g.on("newMessageDeliveryCompleted",e=>{e.deliverySlipPdf&&Tx(e.deliverySlipPdf),e.receiptPdf&&Fx(e.receiptPdf),e.transaction&&Qx(e.transaction),e.transaction&&Gx(e.transaction),ne(!0),f(b(!0)),m(r=>[...r,{sender_name:e.sender_name,sender_pic:e.sender_pic,message:e.message,file_path:e.file_path,buyer_Agree:e.buyer_Agree,contract_sign:e.contract_sign,paymentDeposited:e.paymentDeposited,deliveryCompleted:e.deliveryCompleted,receiptGenerated:e.receiptGenerated}])}),g.on("newMessageDeliverySentBack",e=>{ne(!1),f(b(!0)),m(r=>[...r,{sender_name:e.sender_name,sender_pic:e.sender_pic,message:e.message,file_path:e.file_path,buyer_Agree:e.buyer_Agree,contract_sign:e.contract_sign,paymentDeposited:e.paymentDeposited,deliveryCompleted:e.deliveryCompleted,receiptGenerated:e.receiptGenerated,deliverySentBack:e.deliverySentBack,deliveryAccepted:e.deliveryAccepted,cancelRequest:e.cancelRequest,cancelAgree:e.cancelAgree,requestRefund:e.requestRefund,refundTermsAgree:e.refundTermsAgree,cancelRefundRequest:e.cancelRefundRequest}])}),g.on("newMessageDeliveryAccepted",e=>{h(),e.acceptancePdf&&qx(e.acceptancePdf),e.transactionInvoicePdf&&Ex(e.transactionInvoicePdf),e.systemFeePdf&&kx(e.systemFeePdf),e.transaction&&Ox(e.transaction),e.transaction&&Vx(e.transaction),e.transaction&&Ux(e.transaction),xs(!0),pe(!1),f(b(!0)),m(r=>[...r,{sender_name:e.sender_name,sender_pic:e.sender_pic,message:e.message,file_path:e.file_path,buyer_Agree:e.buyer_Agree,contract_sign:e.contract_sign,paymentDeposited:e.paymentDeposited,deliveryCompleted:e.deliveryCompleted,receiptGenerated:e.receiptGenerated,deliverySentBack:e.deliverySentBack,deliveryAccepted:e.deliveryAccepted,cancelRequest:e.cancelRequest,cancelAgree:e.cancelAgree,requestRefund:e.requestRefund,refundTermsAgree:e.refundTermsAgree,cancelRefundRequest:e.cancelRefundRequest}])}),g.on("newMessageCancelRequest",e=>{pe(!1),ie(!0),f(b(!0)),m(r=>[...r,{sender_name:e.sender_name,sender_pic:e.sender_pic,message:e.message,file_path:e.file_path,buyer_Agree:e.buyer_Agree,contract_sign:e.contract_sign,paymentDeposited:e.paymentDeposited,deliveryCompleted:e.deliveryCompleted,receiptGenerated:e.receiptGenerated,deliverySentBack:e.deliverySentBack,deliveryAccepted:e.deliveryAccepted,cancelRequest:e.cancelRequest,cancelAgree:e.cancelAgree,requestRefund:e.requestRefund,refundTermsAgree:e.refundTermsAgree,cancelRefundRequest:e.cancelRefundRequest}])}),g.on("newMessageRefundCancellation",e=>{us(!0),ie(!1),me(!1),ge(!1),fe(!1),f(b(!0)),m(r=>[...r,{sender_name:e.sender_name,sender_pic:e.sender_pic,message:e.message,file_path:e.file_path,buyer_Agree:e.buyer_Agree,contract_sign:e.contract_sign,paymentDeposited:e.paymentDeposited,deliveryCompleted:e.deliveryCompleted,receiptGenerated:e.receiptGenerated,deliverySentBack:e.deliverySentBack,deliveryAccepted:e.deliveryAccepted,cancelRequest:e.cancelRequest,cancelAgree:e.cancelAgree,requestRefund:e.requestRefund,refundTermsAgree:e.refundTermsAgree,cancelRefundRequest:e.cancelRefundRequest}])}),g.on("newMessageCancelAgreed",e=>{ge(!0),f(b(!0)),m(r=>[...r,{sender_name:e.sender_name,sender_pic:e.sender_pic,message:e.message,file_path:e.file_path,buyer_Agree:e.buyer_Agree,contract_sign:e.contract_sign,paymentDeposited:e.paymentDeposited,deliveryCompleted:e.deliveryCompleted,receiptGenerated:e.receiptGenerated,deliverySentBack:e.deliverySentBack,deliveryAccepted:e.deliveryAccepted,cancelRequest:e.cancelRequest,cancelAgree:e.cancelAgree,requestRefund:e.requestRefund,refundTermsAgree:e.refundTermsAgree,cancelRefundRequest:e.cancelRefundRequest}])}),g.on("newMessageRequestRefund",e=>{ru(e.refundTable),tu(e.RefundTaxDetails),e.refundPdfLink&&Dx(e.refundPdfLink),e.transaction&&Hx(e.transaction),me(!0),f(b(!0)),m(r=>[...r,{sender_name:e.sender_name,sender_pic:e.sender_pic,message:e.message,file_path:e.file_path,buyer_Agree:e.buyer_Agree,contract_sign:e.contract_sign,paymentDeposited:e.paymentDeposited,deliveryCompleted:e.deliveryCompleted,receiptGenerated:e.receiptGenerated,deliverySentBack:e.deliverySentBack,deliveryAccepted:e.deliveryAccepted,cancelRequest:e.cancelRequest,cancelAgree:e.cancelAgree,requestRefund:e.requestRefund,cancelRefundRequest:e.cancelRefundRequest}])}),g.on("newMessageRefundTermsAgree",e=>{h(),e.refundTransactionInvoicePdf&&Ix(e.refundTransactionInvoicePdf),e.refundSystemFeePdf&&Px(e.refundSystemFeePdf),e.transaction&&Kx(e.transaction),e.transaction&&zx(e.transaction),fe(!0),f(b(!0)),m(r=>[...r,{sender_name:e.sender_name,sender_pic:e.sender_pic,message:e.message,file_path:e.file_path,buyer_Agree:e.buyer_Agree,contract_sign:e.contract_sign,paymentDeposited:e.paymentDeposited,deliveryCompleted:e.deliveryCompleted,receiptGenerated:e.receiptGenerated,deliverySentBack:e.deliverySentBack,deliveryAccepted:e.deliveryAccepted,cancelRequest:e.cancelRequest,cancelAgree:e.cancelAgree,requestRefund:e.requestRefund,refundTermsAgree:e.refundTermsAgree,cancelRefundRequest:e.cancelRefundRequest}])}),g.on("adminPaymentStatusChangeRefresh",async e=>{var r;console.log("adminPaymentStatusChangeRefresh",e),Ee(!0),e.buyerId===((r=s==null?void 0:s.user)==null?void 0:r.id)&&f(Lt(!0))}),g.on("adminDeliveryStatusChangeRefresh",async e=>{console.log("adminDeliveryStatusChangeRefresh",e),Ee(!0),ne(!1)}),g.on("adminTransactionCancelRefresh",async e=>{console.log("adminTransactionCancelRefresh",e),Ee(!0)}),sl.current=!0)},[c]);const v=async()=>{await f(Gu(c)),await f(Mt({})),await f(Ou({}))},pu=async()=>{await v(),vx(e=>e+1)},iu=async()=>{await v(),bx(e=>e+1)},gu=async()=>{await v(),Ax(e=>e+1)},mu=async()=>{await v(),jx(e=>e+1)},fu=async()=>{await v(),Rx(e=>e+1)},nl=async()=>{await v(),Sx(e=>e+1)},cu=async()=>{var r;const e=(r=s==null?void 0:s.transaction)==null?void 0:r._id;await f(Zu(e))},yu=()=>{$(`/transaction/${c}/payment`),f(Uu(!0))},ve=async()=>{var e;ds(!0),m(r=>{var p,o;return[...r,{sender_name:(p=s==null?void 0:s.user)==null?void 0:p.name,sender_pic:(o=s==null?void 0:s.user)==null?void 0:o.pic,message:"再見積を依頼しました",buyer_reQuote:!0}]}),g.emit("sendReQuote",{transactionId:c,message:"再見積を依頼しました",sender_id:(e=s==null?void 0:s.user)==null?void 0:e.id},async()=>{sx(!0),he(!1),K(!1),ds(!1),await v()})},be=async()=>{var e;os(!0),m(r=>{var p,o;return[...r,{sender_name:(p=s==null?void 0:s.user)==null?void 0:p.name,sender_pic:(o=s==null?void 0:s.user)==null?void 0:o.pic,message:"取引条件に合意しました",buyer_Agree:!0}]}),g.emit("agreeQuote",{transactionId:c,message:"取引条件に合意しました",sender_id:(e=s==null?void 0:s.user)==null?void 0:e.id,buyer_Agree:!0},async()=>{K(!0),os(!1),await v()})},rl=async()=>{var e;ps(!0),m(r=>{var p,o;return[...r,{sender_name:(p=s==null?void 0:s.user)==null?void 0:p.name,sender_pic:(o=s==null?void 0:s.user)==null?void 0:o.pic,message:"契約を締結しました",contract_sign:!0}]}),g.emit("contractSign",{transactionId:c,message:"契約を締結しました",file:Z,sender_id:(e=s==null?void 0:s.user)==null?void 0:e.id},async()=>{ls(!0),ps(!1),await cu()})},au=async()=>{var e;m(r=>{var p,o;return[...r,{sender_name:(p=s==null?void 0:s.user)==null?void 0:p.name,sender_pic:(o=s==null?void 0:s.user)==null?void 0:o.pic,message:"仮払いが完了し、発注書が発行されました",paymentDeposited:!0}]}),g.emit("paymentCompleted",{transactionId:c,message:"仮払いが完了し、発注書が発行されました",sender_id:(e=s==null?void 0:s.user)==null?void 0:e.id},async()=>{ns(!0)})},_u=async()=>{var e;is(!0),m(r=>{var p,o;return[...r,{sender_name:(p=s==null?void 0:s.user)==null?void 0:p.name,sender_pic:(o=s==null?void 0:s.user)==null?void 0:o.pic,message:"納品が完了し、納品書・受領書が発行されました",deliveryCompleted:!0,receiptGenerated:!0}]}),g.emit("deliveryCompleted",{transactionId:c,message:"納品が完了し、納品書・受領書が発行されました",sender_id:(e=s==null?void 0:s.user)==null?void 0:e.id},async()=>{ne(!0),is(!1)})},wu=async()=>{var e;gs(!0),m(r=>{var p,o;return[...r,{sender_name:(p=s==null?void 0:s.user)==null?void 0:p.name,sender_pic:(o=s==null?void 0:s.user)==null?void 0:o.pic,message:"納品が完了し、納品書・受領書が発行されました",deliverySentBack:!0}]}),g.emit("deliverySentBack",{transactionId:c,message:"納品が完了し、納品書・受領書が発行されました",sender_id:(e=s==null?void 0:s.user)==null?void 0:e.id},async()=>{gs(!1),ne(!1)})},vu=async()=>{var e;ms(!0),m(r=>{var p,o;return[...r,{sender_name:(p=s==null?void 0:s.user)==null?void 0:p.name,sender_pic:(o=s==null?void 0:s.user)==null?void 0:o.pic,message:"納品が完了し、納品書・受領書が発行されました",deliveryAccepted:!0}]}),g.emit("deliveryAccepted",{transactionId:c,message:"納品が完了し、納品書・受領書が発行されました",sender_id:(e=s==null?void 0:s.user)==null?void 0:e.id},async()=>{xs(!0),ms(!1),h()})},bu=async()=>{var e,r;m(p=>{var o,_;return[...p,{sender_name:(o=s==null?void 0:s.user)==null?void 0:o.name,sender_pic:(_=s==null?void 0:s.user)==null?void 0:_.pic,message:"キャンセルを依頼しました",cancelRequest:!0}]}),g.emit("cancelRequest",{transactionId:c,message:"キャンセルを依頼しました",sender_id:(e=s==null?void 0:s.user)==null?void 0:e.id,userId:(r=s==null?void 0:s.user)==null?void 0:r.id},async()=>{ie(!0),pe(!1),await v()})},Au=async()=>{var e,r;fs(!0),m(p=>{var o,_;return[...p,{sender_name:(o=s==null?void 0:s.user)==null?void 0:o.name,sender_pic:(_=s==null?void 0:s.user)==null?void 0:_.pic,message:"キャンセルを取り消す",cancelRefundRequest:!0}]}),g.emit("cancelRefundRequest",{transactionId:c,message:"キャンセルを取り消す",sender_id:(e=s==null?void 0:s.user)==null?void 0:e.id,userId:(r=s==null?void 0:s.user)==null?void 0:r.id},async()=>{us(!0),ie(!1),me(!1),ge(!1),fe(!1),fs(!1),await v()})},ju=async()=>{var e;cs(!0),m(r=>{var p,o;return[...r,{sender_name:(p=s==null?void 0:s.user)==null?void 0:p.name,sender_pic:(o=s==null?void 0:s.user)==null?void 0:o.pic,message:"キャンセル受付中",cancelAgree:!0}]}),g.emit("cancelAgree",{transactionId:c,message:"キャンセル受付中",sender_id:(e=s==null?void 0:s.user)==null?void 0:e.id},async()=>{ge(!0),cs(!1),await v()})},Ru=async()=>{var e;ys(!0),m(r=>{var p,o;return[...r,{sender_name:(p=s==null?void 0:s.user)==null?void 0:p.name,sender_pic:(o=s==null?void 0:s.user)==null?void 0:o.pic,message:"返金が要求されました",requestRefund:!0}]}),g.emit("requestRefund",{transactionId:c,message:"返金が要求されました",sender_id:(e=s==null?void 0:s.user)==null?void 0:e.id,refundTable:j,RefundTaxDetails:d},async()=>{me(!0),ys(!1),await v()})},Su=async()=>{var e;as(!0),m(r=>{var p,o;return[...r,{sender_name:(p=s==null?void 0:s.user)==null?void 0:p.name,sender_pic:(o=s==null?void 0:s.user)==null?void 0:o.pic,message:"返金内容に合意する",refundTermsAgree:!0}]}),g.emit("refundTermsAgree",{transactionId:c,message:"返金内容に合意する",sender_id:(e=s==null?void 0:s.user)==null?void 0:e.id},async()=>{fe(!0),await v(),as(!1),h()})},Nu=async e=>{var r,p,o,_,n;e.preventDefault(),z.length!==0&&(!Xe&&((p=(r=s==null?void 0:s.transaction)==null?void 0:r.conversation)==null?void 0:p.length)===0&&(Fe.push({sender_name:(o=s==null?void 0:s.user)==null?void 0:o.name,sender_pic:(_=s==null?void 0:s.user)==null?void 0:_.pic,message:"見積を依頼しました",first_msg:!0,seller_quote:!1,buyer_reQuote:!1,buyer_Agree:!1,contract_sign:!1,paymentDeposited:!1,deliveryCompleted:!1,receiptGenerated:!1,deliverySentBack:!1,deliveryAccepted:!1,cancelRequest:!1,cancelAgree:!1,requestRefund:!1,refundTermsAgree:!1,cancelRefundRequest:!1}),g.emit("sendMessage",{transactionId:c,message:"見積を依頼しました",sender_id:(n=s==null?void 0:s.user)==null?void 0:n.id,first_msg:!0,seller_quote:!1,buyer_reQuote:!1,buyer_Agree:!1,contract_sign:!1,paymentDeposited:!1,deliveryCompleted:!1,receiptGenerated:!1,deliverySentBack:!1,deliveryAccepted:!1,cancelRequest:!1,cancelAgree:!1,requestRefund:!1,refundTermsAgree:!1,cancelRefundRequest:!1}),Jt(!0)),setTimeout(()=>{var N,C;Z?(m(R=>{var S,P;return[...R,{sender_name:(S=s==null?void 0:s.user)==null?void 0:S.name,sender_pic:(P=s==null?void 0:s.user)==null?void 0:P.pic,message:z,file_path:URL.createObjectURL(Z),file_type:Z.type}]}),g.emit("sendMessage",{transactionId:c,message:z,file:Z,sender_id:(N=s==null?void 0:s.user)==null?void 0:N.id})):(m(R=>{var S,P;return[...R,{sender_name:(S=s==null?void 0:s.user)==null?void 0:S.name,sender_pic:(P=s==null?void 0:s.user)==null?void 0:P.pic,message:z}]}),g.emit("sendMessage",{transactionId:c,message:z,sender_id:(C=s==null?void 0:s.user)==null?void 0:C.id})),qe(""),Rs(null)},500))},Me=async()=>{var r;if(!a||!Array.isArray(a)){console.error("estimateTable is null or not an array");return}const e=[];a.forEach(({content:p,deadline:o,drawingNumber:_,unitPrice:n,quantity:N,unit:C,amount:R})=>{e.push({item_name:p,drawing_number:_,quantity:parseFloat(N),deadline:o,unit:C,price:A(R),unit_price:A(n),metadata:{note:(i==null?void 0:i.textareaValue)||"",totalamountExcludingTax:(i==null?void 0:i.amountExcludingTax)||0,taxAmount:(i==null?void 0:i.taxAmount)||0,totalAmountIncludingTax:(i==null?void 0:i.totalAmountIncludingTax)||0}})}),await f(Hu({estimateData:e,taxRate:$e,transactionId:c})),m(p=>{var o,_;return[...p,{sender_name:(o=s==null?void 0:s.user)==null?void 0:o.name,sender_pic:(_=s==null?void 0:s.user)==null?void 0:_.pic,message:"見積書を送信しました",seller_quote:!0}]}),g.emit("sendQuote",{transactionId:c,message:"見積書を送信しました",sender_id:(r=s==null?void 0:s.user)==null?void 0:r.id,estimateTable:e},async()=>{localStorage.removeItem("estimateTableData"),localStorage.removeItem("taxDetails"),Xt(!0),Ye(!1),K(!1),uu(!0),await v()})},tl=async()=>{if(!j||!Array.isArray(j)){console.error("refundTable is null or not an array");return}const e=j.map(r=>({content:r==null?void 0:r.content,amount:y(r==null?void 0:r.amount)}));await f(Ku({tableData:e,taxDetails:{totalAmountExcludingTax:y(d==null?void 0:d.totalAmountExcludingTax)||0,taxAmount:y(d==null?void 0:d.taxAmount)||0,totalAmountIncludingTax:y(d==null?void 0:d.totalAmountIncludingTax)||0,textareaValue:(d==null?void 0:d.textareaValue)||"",adminRefundTax:Le},transId:c})),Ru(),await v()},Cu=()=>{We(!0),f(Mt({}))},xl=()=>{console.log("refund"),Zs(!0)},Ae=()=>{Ps?Ue(Ps):Ue(s)},ul=()=>{$s?Ut($s):Ut(s)},je=()=>{Ls?He(Ls):He(s)},Re=()=>{Ms?(console.log("reached here"),Ke(Ms)):Ke(s)},Se=()=>{Qs?ze(Qs):ze(s)},Ne=()=>{Gs?Ze(Gs):Ze(s)},dl=()=>{Os?Ht(Os):Ht(s)},ol=()=>{Us?Je(Us):Je(s)},pl=()=>{Hs?Kt(Hs):Kt(s)},il=()=>{Vs?zt(Vs):zt(s)},Bu=()=>{Ks?Zt(Ks):Zt(s)},I=u&&u.length>0?u[u.length-1]:null,V=I?I.taxAmount:null,U=I?I.totalAmountIncludingTax:null,H=I?I.totalamountExcludingTax:null,Qe=I?I.note:null;console.log("transaction",s);const h=()=>{f(Vu(!0))},Tu=()=>{f(zu(!0))},[de,Fu]=t.useState(!1),gl=()=>{Fu(!de)},Ce=160,ee=(hl=(Yl=s==null?void 0:s.transaction)==null?void 0:Yl.customer_id)==null?void 0:hl.business_content,se=(sn=(en=s==null?void 0:s.transaction)==null?void 0:en.seller_id)==null?void 0:sn.business_content,qu=ee&&ee.length>Ce,Eu=se&&se.length>Ce,ku=de?ee:ee==null?void 0:ee.slice(0,Ce),Du=de?se:se==null?void 0:se.slice(0,Ce);return l.jsxs(l.Fragment,{children:[Jx?l.jsx(B,{}):l.jsx("div",{className:"flex justify-center flex-col  items-center sm:mb-80 mb-10  text-start",children:l.jsxs("div",{className:"md:block max-w-[1200px] w-full sm:px-6 md:px-8 xs:py-3 md:py-5 lg:py-6 flex justify-start flex-col xs:px-[1.8rem] ",children:[s&&(s!=null&&s.user)&&((ln=s==null?void 0:s.user)!=null&&ln.name)&&(s==null?void 0:s.user.name)===(s==null?void 0:s.seller_name)?l.jsx("p",{className:" text-[#808080] lg:text-[18px] xs:text-[12] cursor-pointer lg:w-1/3",onClick:()=>{var e,r;$(`/process/company-profile/${(r=(e=s==null?void 0:s.transaction)==null?void 0:e.seller_id)==null?void 0:r._id}`)},children:s==null?void 0:s.seller_name}):l.jsx("p",{className:" text-[#808080] lg:text-[18px] xs:text-[12] ",children:s==null?void 0:s.seller_name}),s&&(s!=null&&s.user)&&((nn=s==null?void 0:s.user)!=null&&nn.name)&&(s==null?void 0:s.user.name)===(s==null?void 0:s.seller_name)?l.jsx("p",{className:"text-[#255BB3] lg:text-[24px] xs:text-[18px] font-bold mt-2 cursor-pointer lg:w-1/3",onClick:()=>{var e,r;$(`/process/company-profile/${(r=(e=s==null?void 0:s.transaction)==null?void 0:e.seller_id)==null?void 0:r._id}`)},children:(rn=s==null?void 0:s.transaction)==null?void 0:rn.process_name}):l.jsx("p",{className:"text-[#255BB3] lg:text-[24px] xs:text-[18px] font-bold mt-2",children:(tn=s==null?void 0:s.transaction)==null?void 0:tn.process_name}),((xn=s==null?void 0:s.transaction)==null?void 0:xn.transaction_status)!==9?l.jsxs("div",{className:"mt-5  text-[#808080]  lg:text-[24px] xs:text-[14px]",children:["現在のステータス",(dn=(un=s==null?void 0:s.transaction)==null?void 0:un.initiateRefund)!=null&&dn.IsTrue?l.jsxs("div",{className:"flex flex-col justify-center  bg-[#F5F5F5]  px-2  mt-[9px]  ",children:[l.jsx(Xu,{IsTrue:(bn=(vn=s==null?void 0:s.transaction)==null?void 0:vn.initiateRefund)==null?void 0:bn.IsTrue,buyername:s&&s.user&&s.user.name===s.customer_name,sellername:s&&s.user&&s.user.name===s.seller_name,netAgreedToCancel:Ie,ratingByBuyer:s&&((An=s==null?void 0:s.transaction)==null?void 0:An.ratingByBuyer),ratingBySeller:s&&((jn=s==null?void 0:s.transaction)==null?void 0:jn.ratingBySeller),netRefundRequested:el,netRefundTermsAgreed:Pe}),l.jsx(Yu,{admin:!1,initiateRefund:(Rn=s==null?void 0:s.transaction)==null?void 0:Rn.initiateRefund,buyername:s&&s.user&&s.user.name===s.customer_name,sellername:s&&s.user&&s.user.name===s.seller_name,handleCancelAgree:ju,netAgreedToCancel:Ie,agreedToCancel:(Sn=s==null?void 0:s.transaction)==null?void 0:Sn.agreedToCancel,handleRequestRefund:tl,transactionRefundStatus:((Nn=s==null?void 0:s.transaction)==null?void 0:Nn.transaction_status)===5,handleRefundTermsAgree:Su,refundTransferred:(Cn=s==null?void 0:s.transaction)==null?void 0:Cn.refundTransferred,handleReviewModalShow:h,ratingByBuyer:s&&((Bn=s==null?void 0:s.transaction)==null?void 0:Bn.ratingByBuyer),ratingBySeller:s&&((Tn=s==null?void 0:s.transaction)==null?void 0:Tn.ratingBySeller),handleRefundCancel:Au,invoiceLoading:wx,transactionCancelledStatus:((Fn=s==null?void 0:s.transaction)==null?void 0:Fn.transaction_status)===7,netRefundRequested:el,netRefundTermsAgreed:Pe,refundCancelLoading:yx,cancelAgreeLoading:ax,requestRefundLoading:_x})]}):l.jsxs("div",{className:"flex flex-col justify-center  bg-[#F5F5F5]  px-2  mt-[9px]  ",children:[l.jsx(Ju,{buyername:s&&s.user&&s.user.name===s.customer_name,netTermsAgreed:ce,deliveryStatus:s&&((on=s==null?void 0:s.transaction)==null?void 0:on.delivery_status),netContractSigned:O,netPaymentDone:Ys,netDeliveryDone:hs,netDeliveryOK:De}),l.jsx(Wu,{admin:!1,buyername:s&&s.user&&s.user.name===s.customer_name,sellername:s&&s.user&&s.user.name===s.seller_name,transactionId:s&&((pn=s==null?void 0:s.transaction)==null?void 0:pn._id),quotation:s&&((mn=(gn=s==null?void 0:s.transaction)==null?void 0:gn.quotation)==null?void 0:mn.length)>0,ordererAgree:s&&((fn=s==null?void 0:s.transaction)==null?void 0:fn.orderer_agree),handleAgreeToTerms:be,handleContract:rl,contract_agree:s&&((cn=s==null?void 0:s.transaction)==null?void 0:cn.contract_agree),paymentDeposit:s&&((yn=s==null?void 0:s.transaction)==null?void 0:yn.paymentDeposit),handleDeliveryCompleted:_u,handleDeliverySentBack:wu,handleDeliveryAccepted:vu,deliveryStatus:s&&((an=s==null?void 0:s.transaction)==null?void 0:an.delivery_status),handleReviewModalShow:h,ratingByBuyer:s&&((_n=s==null?void 0:s.transaction)==null?void 0:_n.ratingByBuyer),ratingBySeller:s&&((wn=s==null?void 0:s.transaction)==null?void 0:wn.ratingBySeller),estimateTable:a,submitQuotation:Me,handleRequestReQuotation:ve,netQuotationRequested:eu,netQuotationSent:su,netQuotationReceived:M,netReQuoteRequested:Q,netReQuoteReceived:lu,netReQuoteSent:G,netTermsAgreed:ce,netContractSigned:O,netPaymentDone:Ys,netDeliveryDone:hs,netDeliveryOK:De,estimateLoading:te,reQuoteLoading:L,agreeLoading:re,concludeLoading:Te,delivery:mx,sentBackLoading:fx,acceptedLoading:cx})]})]}):l.jsxs(l.Fragment,{children:[" ",l.jsxs("div",{className:"mt-5  text-[#808080] bg-[#F5F5F5]  lg:text-[24px] xs:text-[14px] border flex items-center flex-col p-4",children:[l.jsx("span",{className:"lg:h-[80px]  xs:h-[40px]  sm:h-[55px] md:h-[70px]   bg-[#255BB3] flex  justify-center items-center w-[98%]",style:{clipPath:"polygon(0% 0%, 95% 0, 100% 50%, 95% 100%, 0% 100%"},children:l.jsx("span",{className:"bg-[#fff] h-[95%] w-[99.5%] flex  justify-center items-center lg:text-[16px] xs:text-[10px] text-[#255BB3]  font-bold",style:{clipPath:"polygon(0% 0%, 95% 0, 100% 50%, 95% 100%, 0% 100%"},children:"この取引は管理者によってキャンセルされました"})}),l.jsx("div",{className:"flex justify-center w-full",children:l.jsx("span",{className:"lg:h-[120px] xs:h-[140px] w-full bg-[#FFAA00] flex justify-center items-center text-[18px] ",style:{clipPath:"polygon(1% 100%, 99% 100%, 99% 20%, 54% 20%, 53% 0, 52% 20%, 1% 20%) "},children:l.jsx("span",{className:"h-[97.50%] xs:w-[99.58%] lg:w-[99.90%] bg-[#FFF4DF] flex justify-center items-center",style:{clipPath:"polygon(1% 100%, 99% 100%, 99% 20%, 54% 20%, 53% 0, 52% 20%, 1% 20%) "},children:"トランザクションは管理者によってキャンセルされました。詳細についてはサポートにお問い合わせください。"})})})]})]}),s&&(s!=null&&s.user)&&((qn=s==null?void 0:s.user)!=null&&qn.name)&&(s==null?void 0:s.user.name)===(s==null?void 0:s.seller_name)?l.jsxs("div",{className:"w-full mt-8",children:[l.jsx("span",{className:"lg:text-[24px] xs:text-[18px] font-bold text-[#808080]",children:"取引先"}),l.jsxs("div",{className:"flex xs:flex-col lg:flex-row justify-between border p-4 mt-2",children:[l.jsxs("div",{className:"lg:w-[8rem] xs:h-[5rem] flex lg:justify-center lg:items-center xs:justify-start xs:items-center ",children:[l.jsx("img",{src:(kn=(En=s==null?void 0:s.transaction)==null?void 0:En.customer_id)==null?void 0:kn.profile_img,className:"relative inline-flex lg:text-[1rem] xs:text-[0.6rem] items-center justify-center lg:w-[100px] lg:h-[100px] xs:w-[70px] xs:h-[70px] overflow-hidden rounded-full border-2"}),l.jsx("span",{className:"text-[#255BB3] lg:hidden xs:block font-bold xs:ml-5 lg:text-[18px] xs:text-[16px] cursor-pointer",onClick:()=>{var e,r;$(`/process/company-profile/${(r=(e=s==null?void 0:s.transaction)==null?void 0:e.customer_id)==null?void 0:r._id}`)},children:s==null?void 0:s.customer_name})]}),l.jsxs("div",{className:"flex-1 flex flex-col lg:ml-3 ",children:[l.jsx("span",{className:"text-[#255BB3] lg:block xs:hidden font-bold lg:text-[18px] xs:text-[16px] cursor-pointer",onClick:()=>{var e,r;$(`/process/company-profile/${(r=(e=s==null?void 0:s.transaction)==null?void 0:e.customer_id)==null?void 0:r._id}`)},children:s==null?void 0:s.customer_name}),l.jsx("span",{className:"flex flex-wrap xs:w-full text-[#808080] lg:text-[18px] xs:text-[14px]",children:l.jsxs("p",{className:"text-pretty break-word",children:[ku,qu&&l.jsx("button",{onClick:gl,className:"text-[#255BB3]  mt-1 m-2",children:de?"読む量を減らす":"... 続きを読む"})]})})]})]})]}):l.jsxs("div",{className:"w-full mt-8",children:[l.jsx("span",{className:"lg:text-[24px] xs:text-[18px] font-bold text-[#808080]",children:"取引先"}),l.jsxs("div",{className:"flex xs:flex-col lg:flex-row justify-between border p-4 mt-2",children:[l.jsxs("div",{className:"lg:w-[8rem] xs:h-[5rem] flex lg:justify-center lg:items-center xs:justify-start xs:items-center ",children:[l.jsx("img",{src:(In=(Dn=s==null?void 0:s.transaction)==null?void 0:Dn.seller_id)==null?void 0:In.profile_img,className:"relative inline-flex lg:text-[1rem] xs:text-[0.6rem] items-center justify-center lg:w-[100px] lg:h-[100px] xs:w-[70px] xs:h-[70px] overflow-hidden rounded-full border-2"}),l.jsx("span",{className:"text-[#255BB3] lg:hidden xs:block font-bold xs:ml-5 lg:text-[18px] xs:text-[16px] cursor-pointer",onClick:()=>{var e,r;$(`/process/company-profile/${(r=(e=s==null?void 0:s.transaction)==null?void 0:e.seller_id)==null?void 0:r._id}`)},children:s==null?void 0:s.seller_name})]}),l.jsxs("div",{className:"flex-1 flex flex-col lg:ml-3",children:[l.jsx("span",{className:"text-[#255BB3] lg:block xs:hidden font-bold lg:text-[18px] xs:text-[16px] cursor-pointer",onClick:()=>{var e,r;$(`/process/company-profile/${(r=(e=s==null?void 0:s.transaction)==null?void 0:e.seller_id)==null?void 0:r._id}`)},children:s==null?void 0:s.seller_name}),l.jsx("span",{className:"flex flex-wrap xs:w-full text-[#808080] lg:text-[18px] xs:text-[14px]",children:l.jsxs("p",{className:"text-pretty break-word",children:[Du,Eu&&l.jsx("button",{onClick:gl,className:"text-[#255BB3]  mt-1 m-2",children:de?"読む量を減らす":"... 続きを読む"})]})})]})]})]}),l.jsxs("div",{className:"mt-[4rem] flex gap-4 items-center ",children:[l.jsx("span",{className:"text-[#808080] font-bold lg:text-[24px] xs:text-[14]",children:"取引条件"}),l.jsx("span",{className:" bg-[#E6E6E6] px-3 py-1 text-[#808080] lg:text-[24px] xs:text-[14px]",children:"未確定"})]}),($n=(Pn=s==null?void 0:s.transaction)==null?void 0:Pn.initiateRefund)!=null&&$n.IsTrue?l.jsxs("div",{className:"mt-4 border-[1px] border-[#E6E6E6] overflow-x-auto",children:[l.jsx(Qt,{data:du,columns:Ot,theme:Vt,layout:{custom:!0,horizontalScroll:!0}}),l.jsx("div",{className:"bg-[#E6E6E6] xl:w-full lg:w-full xs:w-[200%]  h-[2rem] lg:text-[18px] xs:text-[14px] flex items-center justify-end ",children:l.jsxs("div",{className:"flex justify-between w-1/4",children:[l.jsx("span",{className:"text-[#808080]",children:"合計金額(税抜)"}),s&&!((Un=(Vn=s==null?void 0:s.transaction)==null?void 0:Vn.initiateRefund)!=null&&Un.IsTrue)?l.jsx("span",{className:"mr-3 text-[#808080]",children:x&&u&&(x==null?void 0:x.length)>0?(Hn=x==null?void 0:x[0])==null?void 0:Hn.metadata.totalamountExcludingTax:i?(i==null?void 0:i.amountExcludingTax)||"—":H||"—"}):s&&((zn=(Kn=s==null?void 0:s.transaction)==null?void 0:Kn.initiateRefund)==null?void 0:zn.IsTrue)&&l.jsxs("span",{className:"mr-3 text-[#808080]",children:[" ",u&&(u==null?void 0:u.length)>0&&w?A(y(H)-y((w==null?void 0:w.totalAmountExcludingTax)||((Wn=(Jn=(Zn=s==null?void 0:s.transaction)==null?void 0:Zn.refund)==null?void 0:Jn.taxDetails)==null?void 0:Wn.totalAmountExcludingTax))):u&&(u==null?void 0:u.length)>0&&d?A(y(H)-y((d==null?void 0:d.totalAmountExcludingTax)||((hn=(Yn=(Xn=s==null?void 0:s.transaction)==null?void 0:Xn.refund)==null?void 0:Yn.taxDetails)==null?void 0:hn.totalAmountExcludingTax))):s&&((sr=(er=s==null?void 0:s.transaction)==null?void 0:er.refund)!=null&&sr.taxDetails)&&!d?A(y(H)-y((d==null?void 0:d.totalAmountExcludingTax)||((rr=(nr=(lr=s==null?void 0:s.transaction)==null?void 0:lr.refund)==null?void 0:nr.taxDetails)==null?void 0:rr.totalAmountExcludingTax))):s&&!((xr=(tr=s==null?void 0:s.transaction)==null?void 0:tr.refund)!=null&&xr.taxDetails)&&!d?H:"—"]})]})}),l.jsx("div",{className:"bg-[#ffffff] lg:w-full xs:w-[200%]  h-[2rem] lg:text-[18px] xs:text-[14px] flex items-center justify-end",children:l.jsxs("div",{className:"flex justify-between w-1/4",children:[l.jsxs("span",{className:"text-[#808080]",children:["消費税(",Le,"%)"]})," ",s&&!((dr=(ur=s==null?void 0:s.transaction)==null?void 0:ur.initiateRefund)!=null&&dr.IsTrue)?l.jsx("span",{className:"mr-3 text-[#808080]",children:x&&u&&(x==null?void 0:x.length)>0?(or=x==null?void 0:x[0])==null?void 0:or.metadata.taxAmount:i?(i==null?void 0:i.taxAmount)||"—":V||"—"}):l.jsx("span",{className:"mr-3 text-[#808080]",children:u&&(u==null?void 0:u.length)>0&&w?A(y(V)-y((w==null?void 0:w.taxAmount)||((gr=(ir=(pr=s==null?void 0:s.transaction)==null?void 0:pr.refund)==null?void 0:ir.taxDetails)==null?void 0:gr.taxAmount))):u&&(u==null?void 0:u.length)>0&&d?A(y(V)-y((d==null?void 0:d.taxAmount)||((cr=(fr=(mr=s==null?void 0:s.transaction)==null?void 0:mr.refund)==null?void 0:fr.taxDetails)==null?void 0:cr.taxAmount))):s&&((ar=(yr=s==null?void 0:s.transaction)==null?void 0:yr.refund)!=null&&ar.taxDetails)&&!d?A(y(V)-y((d==null?void 0:d.taxAmount)||((vr=(wr=(_r=s==null?void 0:s.transaction)==null?void 0:_r.refund)==null?void 0:wr.taxDetails)==null?void 0:vr.taxAmount))):s&&!((Ar=(br=s==null?void 0:s.transaction)==null?void 0:br.refund)!=null&&Ar.taxDetails)&&!d?V:"—"})]})}),l.jsx("div",{className:"bg-[#FFF4DF] lg:w-full xs:w-[200%]  h-[2rem] lg:text-[18px] xs:text-[14px] flex items-center justify-end",children:l.jsxs("div",{className:"flex justify-between w-1/4",children:[l.jsx("span",{className:"text-[#808080]",children:"合計金額(税込)"})," ",s&&!((Rr=(jr=s==null?void 0:s.transaction)==null?void 0:jr.initiateRefund)!=null&&Rr.IsTrue)?l.jsx("span",{className:"mr-3 text-[#808080]",children:x&&u&&(x==null?void 0:x.length)>0?(Sr=x==null?void 0:x[0])==null?void 0:Sr.metadata.totalAmountIncludingTax:i?(i==null?void 0:i.totalAmountIncludingTax)||"—":U||"—"}):l.jsx("span",{className:"mr-3 text-[#808080]",children:u&&(u==null?void 0:u.length)>0&&w?A(y(U)-y((w==null?void 0:w.totalAmountIncludingTax)||((Br=(Cr=(Nr=s==null?void 0:s.transaction)==null?void 0:Nr.refund)==null?void 0:Cr.taxDetails)==null?void 0:Br.totalAmountIncludingTax))):u&&(u==null?void 0:u.length)>0&&d?A(y(U)-y((d==null?void 0:d.totalAmountIncludingTax)||((qr=(Fr=(Tr=s==null?void 0:s.transaction)==null?void 0:Tr.refund)==null?void 0:Fr.taxDetails)==null?void 0:qr.totalAmountIncludingTax))):s&&((kr=(Er=s==null?void 0:s.transaction)==null?void 0:Er.refund)!=null&&kr.taxDetails)&&!d?A(y(U)-y((d==null?void 0:d.totalAmountIncludingTax)||((Pr=(Ir=(Dr=s==null?void 0:s.transaction)==null?void 0:Dr.refund)==null?void 0:Ir.taxDetails)==null?void 0:Pr.totalAmountIncludingTax))):s&&!((Lr=($r=s==null?void 0:s.transaction)==null?void 0:$r.refund)!=null&&Lr.taxDetails)&&!d?U:"—"})]})}),l.jsxs("div",{className:"bg-[#ffffff] lg:w-full  xs:w-[200%]  h-[7rem] lg:text-[18px] xs:text-[14px] flex items-center justify-start",children:[l.jsx("div",{className:"w-[6rem] h-[7rem] bg-[#E6E6E6] flex items-center justify-center text-[#808080]",children:"特記事項"})," ",l.jsx("div",{className:"w-full h-[5rem] p-3 text-[#808080] flex flex-wrap break-all",children:u&&(u==null?void 0:u.length)>0&&w?w==null?void 0:w.textareaValue:u&&(u==null?void 0:u.length)>0&&d?d==null?void 0:d.textareaValue:s&&((Qr=(Mr=s==null?void 0:s.transaction)==null?void 0:Mr.refund)!=null&&Qr.taxDetails)&&!d?(Vr=(Or=(Gr=s==null?void 0:s.transaction)==null?void 0:Gr.refund)==null?void 0:Or.taxDetails)==null?void 0:Vr.textareaValue:s&&!((Hr=(Ur=s==null?void 0:s.transaction)==null?void 0:Ur.refund)!=null&&Hr.taxDetails)&&!d?Qe:"—"})]})]}):l.jsxs("div",{className:"mt-4 border-[1px] border-[#E6E6E6] overflow-x-auto",children:[l.jsx(Qt,{data:ue,columns:Ot,theme:Vt,layout:{custom:!0,horizontalScroll:!0}}),l.jsxs("div",{className:"w-full bg-[#fff] text-[#808080] py-1  gap-5 flex items-center lg:justify-end xs:justify-start lg:text-[16px] xs:text-[14px] pr-3 ",children:[l.jsx("span",{className:"font-bold bg-[#FFF4DF] p-2 px-[16px] text-[#808080] lg:text-[16px] ",children:"納期"}),(Ln=ue==null?void 0:ue.nodes[0])==null?void 0:Ln.deadline]}),l.jsx("div",{className:"bg-[#E6E6E6] xl:w-full lg:w-full xs:w-[200%]  h-[2rem] lg:text-[18px] xs:text-[14px] flex items-center justify-end ",children:l.jsxs("div",{className:"flex justify-between w-1/4",children:[l.jsx("span",{className:"text-[#808080]",children:"合計金額(税抜)"}),l.jsxs("span",{className:"mr-3 text-[#808080]",children:[" ",x&&u&&(x==null?void 0:x.length)>0?(Mn=x==null?void 0:x[0])==null?void 0:Mn.metadata.totalamountExcludingTax:i?(i==null?void 0:i.amountExcludingTax)||"—":H||"—"]})]})}),l.jsx("div",{className:"bg-[#ffffff] lg:w-full xs:w-[200%]  h-[2rem] lg:text-[18px] xs:text-[14px] flex items-center justify-end",children:l.jsxs("div",{className:"flex justify-between w-1/4",children:[l.jsxs("span",{className:"text-[#808080]",children:["消費税(",$e,"%)"]})," ",l.jsx("span",{className:"mr-3 text-[#808080]",children:x&&u&&(x==null?void 0:x.length)>0?(Qn=x==null?void 0:x[0])==null?void 0:Qn.metadata.taxAmount:i?(i==null?void 0:i.taxAmount)||"—":V||"—"})]})}),l.jsx("div",{className:"bg-[#FFF4DF] lg:w-full xs:w-[200%]  h-[2rem] lg:text-[18px] xs:text-[14px] flex items-center justify-end",children:l.jsxs("div",{className:"flex justify-between w-1/4",children:[l.jsx("span",{className:"text-[#808080]",children:"合計金額(税込)"})," ",l.jsx("span",{className:"mr-3 text-[#808080]",children:x&&u&&(x==null?void 0:x.length)>0?(Gn=x==null?void 0:x[0])==null?void 0:Gn.metadata.totalAmountIncludingTax:i?(i==null?void 0:i.totalAmountIncludingTax)||"—":U||"—"})]})}),l.jsxs("div",{className:"bg-[#ffffff] lg:w-full  xs:w-[200%]  h-[5rem] lg:text-[18px] xs:text-[14px] flex items-center justify-start",children:[l.jsx("div",{className:"w-[6rem] h-[5rem] bg-[#E6E6E6] flex items-center justify-center text-[#808080]",children:"特記事項"})," ",l.jsx("div",{className:"w-full h-[5rem] p-3 text-[#808080] flex flex-wrap break-all",children:x&&(x==null?void 0:x.length)>0?(On=x==null?void 0:x[0])==null?void 0:On.metadata.note:i?i==null?void 0:i.textareaValue:Qe})]})]}),((Kr=s==null?void 0:s.transaction)==null?void 0:Kr.transaction_status)!==9&&l.jsxs("div",{className:" w-full flex   gap-2 mt-8 cursor-pointer",children:[l.jsxs("div",{className:`flex   ${s&&((zr=s==null?void 0:s.transaction)!=null&&zr.paymentDeposit)?"xl:justify-end  lg:justify-end xs:justify-center md:justify-end  lg:w-[70vw] xs:w-[100vw]":"lg:justify-center xs:justify-center items-center"} gap-10 xs:gap-6   w-[100vw] `,children:[s&&s.user&&(s.user.name===s.customer_name?null:s.user.name===s.seller_name?l.jsxs(l.Fragment,{children:[!O&&l.jsx("span",{onClick:Cu,className:`lg:px-10 xs:px-2 py-3 text-[18px] xs:text-[14px] font-bold lg:text-white lg:bg-[#808080]  xs:bg-[#F8F8F8] xs:border-2 xs:text-[#808080] ${(Zr=s==null?void 0:s.transaction)!=null&&Zr.orderer_agree&&((Jr=s==null?void 0:s.transaction)!=null&&Jr.contract_agree),""}`,children:"条件を修正する"}),ce&&!((Wr=s==null?void 0:s.transaction)!=null&&Wr.contract_agree)?l.jsx(l.Fragment,{children:rx?l.jsx("span",{onClick:a&&Array.isArray(a)&&a.length>0?Me:null,className:`lg:px-10 xs:px-2 py-3  text-[18px] font-bold xs:text-[14px] text-white bg-[#FFAA00] ${a&&Array.isArray(a)&&a.length>0&&!te?"cursor-pointer":"cursor-not-allowed"}`,children:te?l.jsx(B,{className:"h-full"}):"見積を送信する"}):l.jsx("span",{onClick:rl,className:`lg:px-10 xs:px-2 py-3 text-[18px] xs:text-[14px] font-bold lg:text-white text-white bg-[#FFAA00] ${Te?"cursor-not-allowed":"cursor-pointer"}`,children:Te?l.jsx(B,{className:"h-full"}):"契約締結する"})}):!ce&&!((Xr=s==null?void 0:s.transaction)!=null&&Xr.contract_agree)?l.jsx("span",{onClick:a&&Array.isArray(a)&&a.length>0?Me:null,className:`lg:px-10 xs:px-2 py-3  text-[18px] font-bold xs:text-[14px] text-white bg-[#FFAA00]  ${a&&Array.isArray(a)&&a.length>0&&!te?"cursor-pointer":"cursor-not-allowed"}`,children:te?l.jsx(B,{className:"h-full"}):"見積を送信する"}):null]}):null),s&&(((hr=(Yr=s==null?void 0:s.transaction)==null?void 0:Yr.quotation)==null?void 0:hr.length)>0||x.length>0)&&s.user&&s.user.name&&s.user.name===s.customer_name&&!((et=s==null?void 0:s.transaction)!=null&&et.paymentDeposit)&&l.jsxs(l.Fragment,{children:[M&&!Q&&!G&&!O?l.jsx("span",{onClick:(lt=(st=s==null?void 0:s.transaction)==null?void 0:st.initiateRefund)!=null&&lt.IsTrue&&((nt=s==null?void 0:s.transaction)!=null&&nt.agreedToCancel)?xl:ve,className:` lg:px-10 xs:px-2 py-3 text-[18px] xs:text-[14px] font-bold lg:text-white lg:bg-[#808080]  xs:bg-[#F8F8F8] xs:border-2 xs:text-[#808080] ${L?"cursor-not-allowed":"cursor-pointer"}`,children:L?l.jsx(B,{className:"h-full"}):"再見積を依頼する"}):M&&Q&&!G&&!O?l.jsx("span",{onClick:ve,className:` lg:px-10 xs:px-2 py-3 text-[18px] xs:text-[14px] font-bold lg:text-white   bg-[#FFAA00] xs:text-white
                          xs:border-2 ${L?"cursor-not-allowed":"cursor-pointer"}`,children:L?l.jsx(B,{className:"h-full"}):"再見積を依頼する"}):M&&Q&&G&&!O&&l.jsx("span",{onClick:ve,className:` lg:px-10 xs:px-2 py-3 text-[18px] xs:text-[14px] font-bold lg:text-white lg:bg-[#808080]  xs:bg-[#F8F8F8] xs:border-2 xs:text-[#808080] ${L?"cursor-not-allowed":"cursor-pointer"} `,children:L?l.jsx(B,{className:"h-full"}):"再見積を依頼する"}),s&&(((tt=(rt=s==null?void 0:s.transaction)==null?void 0:rt.quotation)==null?void 0:tt.length)>0||x.length>0)&&s.user&&s.user.name&&s.user.name===s.customer_name&&!((xt=s==null?void 0:s.transaction)!=null&&xt.paymentDeposit)&&!((ut=s==null?void 0:s.transaction)!=null&&ut.orderer_agree)&&l.jsx(l.Fragment,{children:M&&!Q&&!G?l.jsx("span",{onClick:be,className:"lg:px-[65px] md:px-[25px] sm:px-[40px] xs:px-[35px] py-3  text-[18px] font-bold xs:text-[14px] text-white bg-[#FFAA00]  cursor-pointer",children:"合意する"}):M&&Q&&!G?l.jsx("span",{onClick:be,className:"lg:px-[65px] md:px-[25px] sm:px-[40px] xs:px-[35px] py-3  text-[18px] font-bold xs:text-[14px] text-white bg-[#FFAA00]  cursor-pointer hidden",children:'""'}):M&&Q&&G&&l.jsx("span",{onClick:be,className:`lg:px-[65px] md:px-[25px] sm:px-[40px] xs:px-[35px] py-3  text-[18px] font-bold xs:text-[14px] text-white bg-[#FFAA00]  ${re?"cursor-not-allowed":"cursor-pointer"}`,children:re?l.jsx(B,{className:"h-full"}):"合意する"})}),O&&(((dt=s==null?void 0:s.transaction)==null?void 0:dt.transaction_status)===1||((ot=s==null?void 0:s.transaction)==null?void 0:ot.transaction_status)===2)&&l.jsx("span",{onClick:!((it=(pt=s==null?void 0:s.transaction)==null?void 0:pt.initiateRefund)!=null&&it.IsTrue)&&yu,className:"lg:px-[65px] md:px-[25px] sm:px-[40px] xs:px-[35px] py-3  text-[18px] font-bold xs:text-[14px] text-white bg-[#FFAA00]  cursor-pointer",children:(mt=(gt=s==null?void 0:s.transaction)==null?void 0:gt.initiateRefund)!=null&&mt.IsTrue?"返金を依頼する":"仮払いする"})]}),s&&(s==null?void 0:s.customer_name)===((ft=s==null?void 0:s.user)==null?void 0:ft.name)&&!Pe&&((yt=(ct=s==null?void 0:s.transaction)==null?void 0:ct.initiateRefund)==null?void 0:yt.IsTrue)&&Ie&&l.jsxs("div",{className:"w-full flex justify-center items-center gap-3",children:[l.jsx("span",{onClick:xl,className:`lg:px-10 xs:px-2 py-3 text-[18px] xs:text-[14px] font-bold lg:text-white lg:bg-[#808080]  xs:bg-[#F8F8F8] xs:border-2 xs:text-[#808080]  ${re?"cursor-not-allowed":"cursor-pointer"}`,children:re?l.jsx(B,{className:"h-full"}):"条件を修正する"}),l.jsx("span",{onClick:tl,className:`lg:px-[65px] md:px-[25px] sm:px-[40px] xs:px-[35px] py-3  text-[18px] font-bold xs:text-[14px] text-white bg-[#FFAA00]  ${!Js&&j&&(j==null?void 0:j.length)>0&&!ke?"cursor-pointer":"cursor-not-allowed"}`,children:Js?l.jsx(B,{className:"h-full"}):"返金を依頼する"})]})]}),l.jsx("div",{children:(s&&((at=s==null?void 0:s.transaction)==null?void 0:at.paymentDeposit)&&!((wt=(_t=s==null?void 0:s.transaction)==null?void 0:_t.initiateRefund)!=null&&wt.IsTrue)&&(((vt=s==null?void 0:s.transaction)==null?void 0:vt.transaction_status)!==5||((bt=s==null?void 0:s.transaction)==null?void 0:bt.transaction_status)!==6&&((At=s==null?void 0:s.transaction)==null?void 0:At.transaction_status)!==7&&((jt=s==null?void 0:s.transaction)==null?void 0:jt.transaction_status)!==8)&&!De||ux)&&l.jsxs("div",{className:"flex lg:justify-end  xs:items-center gap-2 lg:py-3  lg:w-[25vw]  xs:w-[45vw] sm:w-[27vw] ",children:[l.jsx("svg",{width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"text-[#808080] ",children:l.jsx("path",{d:"M5.87508 13.0033L9.00008 9.87825L12.1251 13.0033L13.0001 12.1283L9.87508 9.00325L13.0001 5.87825L12.1251 5.00325L9.00008 8.12825L5.87508 5.00325L5.00008 5.87825L8.12508 9.00325L5.00008 12.1283L5.87508 13.0033ZM9.00008 17.3366C7.86119 17.3366 6.7848 17.1178 5.77091 16.6803C4.75703 16.2428 3.87161 15.6456 3.11466 14.8887C2.35772 14.1317 1.7605 13.2463 1.323 12.2324C0.885498 11.2185 0.666748 10.1421 0.666748 9.00325C0.666748 7.85048 0.885498 6.76714 1.323 5.75325C1.7605 4.73937 2.35772 3.85742 3.11466 3.10742C3.87161 2.35742 4.75703 1.76367 5.77091 1.32617C6.7848 0.888672 7.86119 0.669922 9.00008 0.669922C10.1529 0.669922 11.2362 0.888672 12.2501 1.32617C13.264 1.76367 14.1459 2.35742 14.8959 3.10742C15.6459 3.85742 16.2397 4.73937 16.6772 5.75325C17.1147 6.76714 17.3334 7.85048 17.3334 9.00325C17.3334 10.1421 17.1147 11.2185 16.6772 12.2324C16.2397 13.2463 15.6459 14.1317 14.8959 14.8887C14.1459 15.6456 13.264 16.2428 12.2501 16.6803C11.2362 17.1178 10.1529 17.3366 9.00008 17.3366ZM9.00008 16.0866C10.9723 16.0866 12.6459 15.3956 14.0209 14.0137C15.3959 12.6317 16.0834 10.9616 16.0834 9.00325C16.0834 7.03103 15.3959 5.35742 14.0209 3.98242C12.6459 2.60742 10.9723 1.91992 9.00008 1.91992C7.04175 1.91992 5.37161 2.60742 3.98966 3.98242C2.60772 5.35742 1.91675 7.03103 1.91675 9.00325C1.91675 10.9616 2.60772 12.6317 3.98966 14.0137C5.37161 15.3956 7.04175 16.0866 9.00008 16.0866Z",fill:"#808080"})}),l.jsx("span",{onClick:Tu,className:"text-[#808080] lg:text-[18px] xs:text-[14px] ",children:"取引をキャンセルする"})]})})]}),s&&((Rt=s==null?void 0:s.user)!=null&&Rt.name)&&((St=s==null?void 0:s.user)==null?void 0:St.name)===(s==null?void 0:s.customer_name)?l.jsx(l.Fragment,{children:(Ct=(Nt=s==null?void 0:s.transaction)==null?void 0:Nt.initiateRefund)!=null&&Ct.IsTrue?l.jsxs("div",{className:"mt-[56px] text-[#808080] font-bold  lg:text-[24px] xs:text-[14px] ",children:["帳票一覧",l.jsxs("div",{className:" grid xs:grid-cols-2 md:grid-cols-4 lg:grid-cols-4  jus  border gap-4 lg:px-[124px] sm:px-[100px] xs:px-10 py-10 mt-2",children:[F&&l.jsx("span",{className:`py-2 lg:px-2 sm:px-2 ${F?"bg-[#255BB3] text-[white] cursor-pointer xs:text-[14px] lg:text-[18px]  text-center":"bg-[#E6E6E6] text-[gray] xs:text-[14px] lg:text-[18px]  text-center cursor-not-allowed "}`,onClick:Ae,children:"見積書"}),ye&&l.jsx("span",{className:`py-2 lg:px-2 sm:px-2 ${ye?"bg-[#255BB3] text-[white] cursor-pointer xs:text-[14px] lg:text-[18px]  text-center":"bg-[#E6E6E6] text-[gray] xs:text-[14px] lg:text-[18px]  text-center cursor-not-allowed "}`,onClick:ul,children:"仮払請求書"}),q&&l.jsx("span",{className:`py-2 lg:px-2 sm:px-2 ${q?"bg-[#255BB3] text-[white] cursor-pointer xs:text-[14px] lg:text-[18px]  text-center":"bg-[#E6E6E6] text-[gray] xs:text-[14px] lg:text-[18px]  text-center cursor-not-allowed "}`,onClick:je,children:"発注書"}),E&&l.jsx("span",{className:`py-2 lg:px-2 sm:px-2 ${E?"bg-[#255BB3] text-[white] cursor-pointer xs:text-[14px] lg:text-[18px]  text-center":"bg-[#E6E6E6] text-[gray] xs:text-[14px] lg:text-[18px]  text-center cursor-not-allowed "}`,onClick:Re,children:"納品書"}),k&&l.jsx("span",{className:`py-2 lg:px-2 sm:px-2 ${k?"bg-[#255BB3] text-[white] cursor-pointer xs:text-[14px] lg:text-[18px]  text-center":"bg-[#E6E6E6] text-[gray] xs:text-[14px] lg:text-[18px]  text-center cursor-not-allowed "}`,onClick:Se,children:"受領書"}),D&&l.jsx("span",{className:`py-2 lg:px-2 sm:px-2 ${D?"bg-[#255BB3] text-[white] cursor-pointer xs:text-[14px] lg:text-[18px]  text-center":"bg-[#E6E6E6] text-[gray] xs:text-[14px] lg:text-[18px]  text-center cursor-not-allowed "}`,onClick:Ne,children:"検収書"}),l.jsx("span",{className:`py-2 lg:px-2 sm:px-2 flex justify-center items-center ${xe?"bg-[#255BB3] text-[white] cursor-pointer xs:text-[14px] lg:text-[18px]  text-center":"bg-[#E6E6E6] text-[gray] xs:text-[14px] lg:text-[18px]  text-center cursor-not-allowed "}`,onClick:xe?ol:void 0,children:"返金請求書"}),l.jsx("span",{className:`py-2 lg:px-2  sm:px-2 xs:text-[14px] lg:text-[18px]   ${_e?"bg-[#255BB3] text-[white] cursor-pointer xs:text-[14px] lg:text-[18px]  text-center":"bg-[#E6E6E6] text-[gray] xs:text-[14px] lg:text-[18px]  text-center cursor-not-allowed "}`,onClick:_e?pl:void 0,children:"取引請求書"})]})]}):l.jsxs("div",{className:"mt-[56px] text-[#808080] font-bold  lg:text-[24px] xs:text-[18px] ",children:["帳票一覧",l.jsxs("div",{className:" grid xs:grid-cols-2 md:grid-cols-4 lg:grid-cols-4  jus  border gap-4 lg:px-[124px] sm:px-[100px] xs:px-10 py-10 mt-2",children:[l.jsx("span",{className:`py-2 lg:px-2 sm:px-2 ${F?"bg-[#255BB3] text-[white] cursor-pointer xs:text-[14px] lg:text-[18px]  text-center":"bg-[#E6E6E6] text-[gray] xs:text-[14px] lg:text-[18px]  text-center cursor-not-allowed "}`,onClick:F?Ae:void 0,children:"見積書"}),l.jsx("span",{className:`py-2 lg:px-2  sm:px-2 xs:text-[14px] lg:text-[18px]   ${ye?"bg-[#255BB3] text-[white] cursor-pointer xs:text-[14px] lg:text-[18px]  text-center":"bg-[#E6E6E6] text-[gray] xs:text-[14px] lg:text-[18px]  text-center cursor-not-allowed "}`,onClick:ye?ul:void 0,children:"仮払請求書"}),l.jsx("span",{className:`py-2 lg:px-2  sm:px-2 xs:text-[14px] lg:text-[18px]   ${q?"bg-[#255BB3] text-[white] cursor-pointer xs:text-[14px] lg:text-[18px]  text-center":"bg-[#E6E6E6] text-[gray] xs:text-[14px] lg:text-[18px]  text-center cursor-not-allowed "}`,onClick:q?je:void 0,children:"発注書"}),l.jsx("span",{className:`py-2 lg:px-2  sm:px-2 xs:text-[14px] lg:text-[18px]   ${E?"bg-[#255BB3] text-[white] cursor-pointer xs:text-[14px] lg:text-[18px]  text-center":"bg-[#E6E6E6] text-[gray] xs:text-[14px] lg:text-[18px]  text-center cursor-not-allowed "}`,onClick:E?Re:void 0,children:"納品書"}),l.jsx("span",{className:`py-2 lg:px-2  sm:px-2 xs:text-[14px] lg:text-[18px]   ${k?"bg-[#255BB3] text-[white] cursor-pointer xs:text-[14px] lg:text-[18px]  text-center":"bg-[#E6E6E6] text-[gray] xs:text-[14px] lg:text-[18px]  text-center cursor-not-allowed "}`,onClick:k?Se:void 0,children:"受領書"}),l.jsx("span",{className:`py-2 lg:px-2  sm:px-2 xs:text-[14px] lg:text-[18px]   ${D?"bg-[#255BB3] text-[white] cursor-pointer xs:text-[14px] lg:text-[18px]  text-center":"bg-[#E6E6E6] text-[gray] xs:text-[14px] lg:text-[18px]  text-center cursor-not-allowed "}`,onClick:D?Ne:void 0,children:"検収書"})]})]})}):l.jsx(l.Fragment,{children:l.jsxs("div",{className:"mt-[56px] text-[#808080] font-bold  lg:text-[24px] xs:text-[14px] ",children:["帳票一覧",(Tt=(Bt=s==null?void 0:s.transaction)==null?void 0:Bt.initiateRefund)!=null&&Tt.IsTrue?l.jsxs("div",{className:" grid xs:grid-cols-2 md:grid-cols-4 lg:grid-cols-4  jus  border gap-4 lg:px-[124px] sm:px-[100px] xs:px-10 py-10 mt-2",children:[F&&l.jsx("span",{className:`py-2 lg:px-2 sm:px-2 ${F?"bg-[#255BB3] text-[white] cursor-pointer xs:text-[14px] lg:text-[18px]  text-center":"bg-[#E6E6E6] text-[gray] xs:text-[14px] lg:text-[18px]  text-center cursor-not-allowed "}`,onClick:Ae,children:"見積書"}),q&&l.jsx("span",{className:`py-2 lg:px-2 sm:px-2 ${q?"bg-[#255BB3] text-[white] cursor-pointer xs:text-[14px] lg:text-[18px]  text-center":"bg-[#E6E6E6] text-[gray] xs:text-[14px] lg:text-[18px]  text-center cursor-not-allowed "}`,onClick:je,children:"発注書"}),E&&l.jsx("span",{className:`py-2 lg:px-2 sm:px-2 ${E?"bg-[#255BB3] text-[white] cursor-pointer xs:text-[14px] lg:text-[18px]  text-center":"bg-[#E6E6E6] text-[gray] xs:text-[14px] lg:text-[18px]  text-center cursor-not-allowed "}`,onClick:Re,children:"納品書"}),k&&l.jsx("span",{className:`py-2 lg:px-2 sm:px-2 ${k?"bg-[#255BB3] text-[white] cursor-pointer xs:text-[14px] lg:text-[18px]  text-center":"bg-[#E6E6E6] text-[gray] xs:text-[14px] lg:text-[18px]  text-center cursor-not-allowed "}`,onClick:Se,children:"受領書"}),D&&l.jsx("span",{className:`py-2 lg:px-2 sm:px-2 ${D?"bg-[#255BB3] text-[white] cursor-pointer xs:text-[14px] lg:text-[18px]  text-center":"bg-[#E6E6E6] text-[gray] xs:text-[14px] lg:text-[18px]  text-center cursor-not-allowed "}`,onClick:Ne,children:"検収書"}),ae&&l.jsx("span",{className:`py-2 lg:px-2 sm:px-2 ${ae?"bg-[#255BB3] text-[white] cursor-pointer xs:text-[14px] lg:text-[18px]  text-center":"bg-[#E6E6E6] text-[gray] xs:text-[14px] lg:text-[18px]  text-center cursor-not-allowed "}`,onClick:dl,children:"取引請求書"}),we&&l.jsx("span",{className:`py-2 lg:px-2 sm:px-2 ${we?"bg-[#255BB3] text-[white] cursor-pointer xs:text-[14px] lg:text-[18px]  text-center":"bg-[#E6E6E6] text-[gray] xs:text-[14px] lg:text-[18px]  text-center cursor-not-allowed "}`,onClick:il,children:"システム利用料請求書"}),l.jsx("span",{className:`py-2 lg:px-2 sm:px-2 flex justify-center items-center ${xe?"bg-[#255BB3] text-[white] cursor-pointer xs:text-[14px] lg:text-[18px]  text-center":"bg-[#E6E6E6] text-[gray] xs:text-[14px] lg:text-[18px]  text-center cursor-not-allowed "}`,onClick:xe?ol:void 0,children:"返金請求書"}),l.jsx("span",{className:`py-2 lg:px-2  sm:px-2 xs:text-[14px] lg:text-[18px]   ${_e?"bg-[#255BB3] text-[white] cursor-pointer xs:text-[14px] lg:text-[18px]  text-center":"bg-[#E6E6E6] text-[gray] xs:text-[14px] lg:text-[18px]  text-center cursor-not-allowed "}`,onClick:_e?pl:void 0,children:"取引請求書"}),l.jsx("span",{className:`py-2 lg:px-2  sm:px-2 xs:text-[14px] lg:text-[18px]   ${ll?"bg-[#255BB3] text-[white] cursor-pointer xs:text-[14px] lg:text-[18px]  text-center":"bg-[#E6E6E6] text-[gray] xs:text-[14px] lg:text-[18px]  text-center cursor-not-allowed "}`,onClick:ll?Bu:void 0,children:"システム利用料請求書"})]}):l.jsxs("div",{className:" grid xs:grid-cols-2 md:grid-cols-4 lg:grid-cols-4   border gap-4 lg:px-[124px] sm:px-[100px] xs:px-10 py-10 mt-2",children:[l.jsx("span",{className:`py-2 lg:px-2 sm:px-2 ${F?"bg-[#255BB3] text-[white] cursor-pointer xs:text-[14px] lg:text-[18px]  text-center":"bg-[#E6E6E6] text-[gray] xs:text-[14px] lg:text-[18px]  text-center cursor-not-allowed"}`,onClick:F?Ae:void 0,children:"見積書"}),l.jsx("span",{className:`py-2 lg:px-2  sm:px-2 xs:text-[14px] lg:text-[18px]   ${q?"bg-[#255BB3] text-[white] cursor-pointer xs:text-[14px] lg:text-[18px]  text-center":"bg-[#E6E6E6] text-[gray] xs:text-[14px] lg:text-[18px]  text-center cursor-not-allowed "}`,onClick:q?je:void 0,children:"発注書"}),l.jsx("span",{className:`py-2 lg:px-2  sm:px-2 xs:text-[14px] lg:text-[18px]   ${E?"bg-[#255BB3] text-[white] cursor-pointer xs:text-[14px] lg:text-[18px]  text-center":"bg-[#E6E6E6] text-[gray] xs:text-[14px] lg:text-[18px]  text-center cursor-not-allowed "}`,onClick:E?Re:void 0,children:"納品書"}),l.jsx("span",{className:`py-2 lg:px-2  sm:px-2 xs:text-[14px] lg:text-[18px]   ${k?"bg-[#255BB3] text-[white] cursor-pointer xs:text-[14px] lg:text-[18px]  text-center":"bg-[#E6E6E6] text-[gray] xs:text-[14px] lg:text-[18px]  text-center cursor-not-allowed "}`,onClick:k?Se:void 0,children:"受領書"}),l.jsx("span",{className:`py-2 lg:px-2  sm:px-2 xs:text-[14px] lg:text-[18px]   ${D?"bg-[#255BB3] text-[white] cursor-pointer xs:text-[14px] lg:text-[18px]  text-center":"bg-[#E6E6E6] text-[gray] xs:text-[14px] lg:text-[18px]  text-center cursor-not-allowed "}`,onClick:D?Ne:void 0,children:"検収書"}),l.jsx("span",{className:`py-2 lg:px-2  sm:px-2 xs:text-[14px] lg:text-[18px]   ${ae?"bg-[#255BB3] text-[white] cursor-pointer xs:text-[14px] lg:text-[18px]  text-center":"bg-[#E6E6E6] text-[gray] xs:text-[14px] lg:text-[18px]  text-center cursor-not-allowed "}`,onClick:ae?dl:void 0,children:"取引請求書"}),l.jsx("span",{className:`py-2 lg:px-2  sm:px-2 xs:text-[14px] lg:text-[18px]   ${we?"bg-[#255BB3] text-[white] cursor-pointer xs:text-[14px] lg:text-[18px]  text-center":"bg-[#E6E6E6] text-[gray] xs:text-[14px] lg:text-[18px]  text-center cursor-not-allowed "}`,onClick:we?il:void 0,children:"システム利用料請求書"})]})]})}),l.jsxs("div",{className:"mt-8 ",children:[l.jsxs("span",{className:"text-[#808080] font-bold lg:text-[24px] xs:text-[18px]",children:[" ","メッセージ"]}),l.jsx("div",{className:"border w-full h-[500px] mt-2 overflow-scroll ",ref:oe,children:l.jsx("div",{className:"lg:p-6 xs:p-4 flex w-full",children:l.jsx("div",{className:"w-full ",children:Fe.map((e,r)=>{var p,o,_,n,N,C,R,S,P,Ft,qt,Et,kt,Dt,It,Pt,$t;return l.jsxs("div",{className:`flex flex-row w-[100%] ${s&&((p=s==null?void 0:s.user)==null?void 0:p.name)===(e==null?void 0:e.sender_name)?"flex-row-reverse lg:gap-10 xs:gap-4 mt-5 items-center":"mt-3 items-center"} `,ref:Be,children:[l.jsx("div",{className:`${s&&((o=s==null?void 0:s.user)==null?void 0:o.name)===(e==null?void 0:e.sender_name)?"lg:w-[10%] xs:w-[20%] sm:w-[12%] flex xs:items-start xs:justify-start ":"lg:w-[10%] xs:w-[20%] sm:w-[12%]  "} `,children:e!=null&&e.sender_pic?l.jsx("img",{src:`${e==null?void 0:e.sender_pic}`,className:"rounded-full bg-[#DCDCDC] lg:h-[60px] lg:w-[60px]  xs:h-[51px] xs:w-[51px] flex justify-center items-center text-[#808080] xs:text-[14px] lg:text-[18px] border-2 mt-6"}):l.jsx("div",{className:"rounded-full bg-[#DCDCDC] lg:h-[60px] lg:w-[60px]  xs:h-[51px] xs:w-[51px] flex justify-center items-center text-[#808080] xs:text-[14px] lg:text-[18px] ",children:"Logo"})}),l.jsxs("div",{className:e!=null&&e.first_msg||e!=null&&e.seller_quote||e!=null&&e.buyer_reQuote||e!=null&&e.buyer_Agree||e!=null&&e.contract_sign||e!=null&&e.paymentDeposited||e!=null&&e.deliveryCompleted||e!=null&&e.receiptGenerated||e!=null&&e.deliverySentBack||e!=null&&e.deliveryAccepted||e!=null&&e.cancelRequest||e!=null&&e.cancelRefundRequest||e!=null&&e.cancelAgree||e!=null&&e.requestRefund||e!=null&&e.refundTermsAgree||(e==null?void 0:e.message)==="Request New Quotation Sent!"||(e==null?void 0:e.message)==="取引条件に合意しました"||(e==null?void 0:e.message)==="Signed a Contract"?" lg:w-[60%] xs:w-[80%] sm:w-[60%] flex flex-col gap-1 mt-1 breal-all ":" lg:w-[60%] xs:w-[80%] sm:w-[60%] flex flex-col gap-1 mt-1 break-all ",children:[l.jsx("div",{className:`flex ${s&&((_=s==null?void 0:s.user)==null?void 0:_.name)===(e==null?void 0:e.sender_name)?"flex-row-reverse":""} `,children:l.jsx("span",{className:" text-[#808080] xs:text-[14px] lg:text-[18px] font-bold",children:e==null?void 0:e.sender_name})}),l.jsx("div",{className:`px-5 ${e!=null&&e.file_path||e!=null&&e.file_type?" h-[300px]":"h-auto "}  rounded flex xs:flex-col md:flex-row xs:justify-center  md:items-center ${e!=null&&e.first_msg||e!=null&&e.seller_quote||e!=null&&e.buyer_reQuote||e!=null&&e.buyer_Agree||e!=null&&e.contract_sign||e!=null&&e.paymentDeposited||e!=null&&e.deliveryCompleted||e!=null&&e.receiptGenerated||e!=null&&e.deliverySentBack||e!=null&&e.deliveryAccepted||e!=null&&e.cancelRequest||e!=null&&e.cancelRefundRequest||e!=null&&e.cancelAgree||e!=null&&e.requestRefund||e!=null&&e.refundTermsAgree||(e==null?void 0:e.message)==="Request New Quotation Sent!"||(e==null?void 0:e.message)==="取引条件に合意しました"||(e==null?void 0:e.message)==="Signed a Contract"?`${s&&((n=s==null?void 0:s.user)==null?void 0:n.name)===(e==null?void 0:e.sender_name)?"bg-[#d2e3fe] ":"bg-[#FFF4DF]   "}  `:`${s&&((N=s==null?void 0:s.user)==null?void 0:N.name)===(e==null?void 0:e.sender_name)?"bg-[#d2e3fe]":"bg-[#FFF4DF] "} `} `,children:e!=null&&e.file_path||e!=null&&e.file_type?l.jsxs("a",{target:"_blank",href:e==null?void 0:e.file_path,className:"flex flex-col gap-1 text-[#808080] xs:text-[14px] lg:text-[18px] h-full  w-full ",children:[l.jsx("p",{className:" 0",children:e==null?void 0:e.message}),e!=null&&e.file_path&&["png","jpeg","jpg","svg+xml","gif"].some(Ge=>e.file_path.includes(Ge))||e!=null&&e.file_type&&["image/png","image/jpeg","image/jpg","image/svg+xml","image/gif"].some(Ge=>e.file_type.includes(Ge))?l.jsx("img",{src:e==null?void 0:e.file_path,className:"w-full max-h-[250px] object-contain ",alt:"img-preview"}):null]}):l.jsxs("div",{className:`flex xs:flex-col lg:flex-row     ${s&&((C=s==null?void 0:s.user)==null?void 0:C.name)===(e==null?void 0:e.sender_name)?"flex-row-reverse justify-between  lg:items-center xs:items-end ":"xs:flex-row md:flex-row justify-between  lg:items-center xs:items-start "}   py-2 xs:gap-2 lg:gap-1 w-full `,children:[l.jsx("span",{className:e!=null&&e.first_msg||e!=null&&e.seller_quote||e!=null&&e.buyer_reQuote||e!=null&&e.buyer_Agree||e!=null&&e.contract_sign||e!=null&&e.paymentDeposited||e!=null&&e.deliveryCompleted||e!=null&&e.receiptGenerated||e!=null&&e.deliverySentBack||e!=null&&e.deliveryAccepted||e!=null&&e.cancelRequest||e!=null&&e.cancelRefundRequest||e!=null&&e.cancelAgree||e!=null&&e.requestRefund||e!=null&&e.refundTermsAgree||(e==null?void 0:e.message)==="Request New Quotation Sent!"||(e==null?void 0:e.message)==="取引条件に合意しました"||(e==null?void 0:e.message)==="Signed a Contract"?` ${s&&((R=s==null?void 0:s.user)==null?void 0:R.name)===(e==null?void 0:e.sender_name)?"text-[#255BB3] w-full text-end":"text-[#FFAA00]  w-full"}  xs:text-[12px] lg:text-[18px] font-bold   ${s&&((S=s==null?void 0:s.user)==null?void 0:S.name)===(e==null?void 0:e.sender_name)?" lg:order-2 text-justify":""}`:`   text-[#808080] xs:text-[12px] lg:text-[18px] w-full     ${s&&((P=s==null?void 0:s.user)==null?void 0:P.name)===(e==null?void 0:e.sender_name)?"flex justify-end text-justify":""}  `,children:e==null?void 0:e.message}),e!=null&&e.first_msg||e!=null&&e.seller_quote||e!=null&&e.buyer_reQuote||e!=null&&e.buyer_Agree||e!=null&&e.contract_sign||e!=null&&e.paymentDeposited||e!=null&&e.deliveryCompleted||e!=null&&e.receiptGenerated||e!=null&&e.deliverySentBack||e!=null&&e.deliveryAccepted||e!=null&&e.cancelRequest||e!=null&&e.cancelRefundRequest||e!=null&&e.cancelAgree||e!=null&&e.requestRefund||e!=null&&e.refundTermsAgree||(e==null?void 0:e.message)==="Request New Quotation Sent!"||(e==null?void 0:e.message)==="取引条件に合意しました"||(e==null?void 0:e.message)==="Signed a Contract"?l.jsxs("div",{className:` h-full lg:w-[50%] xs:w-full flex  gap-1 ${s&&((Ft=s==null?void 0:s.user)==null?void 0:Ft.name)===(e==null?void 0:e.sender_name)?" xs:justify-end xs:items-end lg:justify-start lg:items-start":"xs:justify-start xs:items-start lg:justify-end lg:items-end "} `,children:[(e==null?void 0:e.seller_quote)&&l.jsx("div",{className:` ${s&&((qt=s==null?void 0:s.user)==null?void 0:qt.name)===(e==null?void 0:e.sender_name)?"bg-[#255BB3]":"bg-[#FFAA00]"} xs:text-[12px] lg:text-[18px] h-full xs:w-[50%] lg:w-[50%] text-white flex justify-center items-center py-2 `,children:l.jsx("button",{onClick:pu,type:"button",className:"h-full w-full xs:text-[12px]  lg:text-[18px] ",children:"見積書"})}),(e==null?void 0:e.paymentDeposited)&&l.jsx("div",{className:`${s&&((Et=s==null?void 0:s.user)==null?void 0:Et.name)===(e==null?void 0:e.sender_name)?"bg-[#255BB3]":"bg-[#FFAA00]"} xs:text-[12px] lg:text-[18px]  h-full xs:w-[50%] lg:w-[50%]  text-white flex justify-center items-center py-2`,children:l.jsx("button",{onClick:iu,type:"button",className:"h-full w-full  xs:text-[12px]  lg:text-[18px]",children:"発注書"})}),(e==null?void 0:e.deliveryCompleted)&&l.jsx("div",{className:`${s&&((kt=s==null?void 0:s.user)==null?void 0:kt.name)===(e==null?void 0:e.sender_name)?"bg-[#255BB3]":"bg-[#FFAA00]"} xs:text-[12px] lg:text-[18px] h-full xs:w-[50%] lg:w-[50%]  text-white flex justify-center items-center py-2`,children:l.jsx("button",{onClick:gu,type:"button",className:"h-full w-full  xs:text-[12px]  lg:text-[18px]",children:"納品書"})}),(e==null?void 0:e.receiptGenerated)&&l.jsx("div",{className:`${s&&((Dt=s==null?void 0:s.user)==null?void 0:Dt.name)===(e==null?void 0:e.sender_name)?"bg-[#255BB3]":"bg-[#FFAA00]"} xs:text-[12px] lg:text-[18px] "h-full xs:w-[50%] lg:w-[50%]  text-white flex justify-center items-center py-2"`,children:l.jsx("button",{onClick:mu,type:"button",className:"h-full w-full  xs:text-[12px]  lg:text-[18px] py-2",children:"受領書"})}),(e==null?void 0:e.deliveryAccepted)&&l.jsx("div",{className:`${s&&((It=s==null?void 0:s.user)==null?void 0:It.name)===(e==null?void 0:e.sender_name)?"bg-[#255BB3]":"bg-[#FFAA00]"}  xs:text-[12px] lg:text-[18px] h-full xs:w-[50%] lg:w-[50%]  text-white flex justify-center items-center py-2`,children:l.jsx("button",{onClick:fu,type:"button",className:"h-full w-full  xs:text-[12px]  lg:text-[18px]",children:"検収書"})}),(e==null?void 0:e.requestRefund)&&l.jsx("div",{className:`${s&&((Pt=s==null?void 0:s.user)==null?void 0:Pt.name)===(e==null?void 0:e.sender_name)?"bg-[#255BB3]":"bg-[#FFAA00]"} xs:text-[12px] lg:text-[18px]  h-full xs:w-[50%] lg:w-[50%]  text-white flex justify-center items-center py-2`,children:l.jsx("button",{onClick:nl,type:"button",className:"h-full w-full  xs:text-[12px]  lg:text-[18px]",children:"返金請求書"})}),(e==null?void 0:e.refundTermsAgree)&&l.jsx("div",{className:`${s&&(($t=s==null?void 0:s.user)==null?void 0:$t.name)===(e==null?void 0:e.sender_name)?"bg-[#255BB3]":"bg-[#FFAA00]"} xs:text-[12px] lg:text-[18px]  h-full xs:w-[50%] lg:w-[50%]  text-white flex justify-center items-center py-2`,children:l.jsx("button",{onClick:nl,type:"button",className:"h-full w-full  xs:text-[12px]  lg:text-[18px]",children:"返金請求書"})})]}):""]})})]})]},r)})})})})]}),l.jsxs("form",{onSubmit:Nu,className:"border border-black h-[200px] w-full mt-2",children:[l.jsx("textarea",{value:z,onChange:e=>qe(e.target.value),className:"w-full h-[150px] align-top p-2 resize-none border-0 outline-none",disabled:!!Z}),l.jsxs("div",{className:"flex justify-between px-2 sm:px-2 mt-1",children:[l.jsxs("label",{className:"bg-[#E6E6E6] xs:px-3 lg:py-1 xs:py-2  text-[#808080] border border-gray-500 lg:text-[18px] xs:text-[14px] cursor-pointer",children:["ファイルを選択",l.jsx("input",{type:"file",className:"hidden",onChange:e=>{qe(e.target.files[0].name),Rs(e.target.files[0]),e.target.value=""}})]}),l.jsx("button",{type:"submit",className:"bg-[#255BB3] xs:px-2 lg:py-1 xs:py-2 text-white border border-blue-500 lg:text-[18px] xs:text-[14px]",children:"メッセージを送信"})]})]}),le?l.jsx(hu,{setModify:ss,showContactModal:le,setShowContactModal:We,defaultRow:Oe,compactTableData:ue,taxRate:$e,lastQuotationTaxAmount:V,lasttotalAmountIncludingTax:U,lasttotalamountExcludingTax:H,lastNote:Qe}):null]})}),Ws&&l.jsx(ed,{reviewModalShow:Ws,transaction:s,buyerName:s&&s.user&&s.user.name===s.customer_name}),zs?l.jsx(sd,{setModify:ss,showContactModal:zs,setShowContactModal:Zs,defaultRow:Gt,compactTableData:ou,taxRate:Le,lastNote:d==null?void 0:d.textareaValue}):null,Xs&&l.jsx(ld,{cancelModalshow:Xs,handleCancelRequest:bu})]})};export{ad as default};
