import{u as h,d as U,a as k,r as a,j as e,S as F,q as R}from"./index-w2wx-x_X.js";import{u as q}from"./index.esm-aRdTVIgd.js";/* empty css                      */const C=({setAuth:o})=>{const c=h(),u=U(),{loading:f,user:s,loginErr:r}=k(t=>t.user),l=localStorage.getItem("pathName"),i=h(),{register:d,handleSubmit:b,formState:{errors:n,isSubmitting:x},reset:g}=q();a.useEffect(()=>(o(!0),()=>{o(!1),window.location.pathname.includes("/login")||(console.log("Removing pathName"),localStorage.removeItem("pathName"))}),[]),a.useEffect(()=>{var t,m,p;console.log("User effect triggered",s),(t=s==null?void 0:s.newUser)!=null&&t.isVerified&&!(s!=null&&s.newUser.termsAccepted)?(console.log("Redirecting to /terms"),i("/terms")):(m=s==null?void 0:s.newUser)!=null&&m.isVerified&&(s!=null&&s.newUser.termsAccepted)&&!l?(console.log("Redirecting to /"),i("/")):(p=s==null?void 0:s.newUser)!=null&&p.isVerified&&(s!=null&&s.newUser.termsAccepted)&&l&&(console.log("Redirecting to localPathname",l),i(l))},[s,i]);const[,j]=a.useState(null),[N,w]=a.useState(!1),[y,v]=a.useState(!1),S=async t=>{try{j(null),v(!1),await u(R(t)),g()}catch(m){console.error("Error submitting data:",m)}};return console.log(s,f),e.jsx(e.Fragment,{children:e.jsx("div",{className:"md:mx-auto md:w-[600px] md:h-[520px] bg-light mt-[50px] mb-[100px] xs:mx-4 xs:h-[375px]",children:e.jsx("div",{className:"h-full",children:e.jsx("div",{className:"md:w-[390px] md:mx-auto md:py-[50px] xs:py-[20px] xs:mx-4",children:e.jsxs("form",{onSubmit:b(S),className:"w-full",children:[e.jsx("div",{className:"text-primary font-bold text-center text-[20px] ",children:"ログイン画面"}),e.jsx("div",{className:"mt-[20px]",children:r&&e.jsx("p",{className:"text-red-600 text-center",children:r==null?void 0:r.message})}),e.jsx("div",{className:"md:mt-[50px] xs:mt-[24px]",children:e.jsx("label",{className:"text-base text-tertiary",children:"メールアドレス"})}),e.jsxs("div",{className:"mt-[10px]",children:[e.jsx("input",{className:"md:h-[45px] p-2 xs:h-[39px] w-full outline-none border border-secondary placeholder-secondary",type:"email",...d("email",{required:"Email address is required",pattern:{value:/\S+@\S+\.\S+/,message:"Invalid email address"}})}),n.email&&e.jsx("p",{className:"text-red-600",children:n.email.message})]}),e.jsx("div",{className:"md:mt-[11px] xs:mt-[14px]",children:e.jsx("label",{className:"text-base text-tertiary",children:"パスワード"})}),e.jsxs("div",{className:"mt-[10px]",children:[e.jsx("input",{className:"md:h-[45px] p-2 xs:h-[39px] w-full outline-none border border-secondary placeholder-secondary ",type:y?"text":"password",...d("password",{required:"Password is required"})}),n.password&&e.jsx("p",{className:"text-red-600",children:n.password.message})]}),e.jsxs("div",{className:"flex-item md:mt-[24px] xs:mt-[8px]",children:[e.jsx("input",{type:"checkbox",className:"form-checkbox rounded-sm",value:1,onClick:()=>w(!N),name:"h"}),e.jsxs("span",{className:"ml-2 text-tertiary md:text-base",children:["メールアドレスを記憶する"," "]})]}),e.jsx("button",{className:"w-full btn h-[50px] flex place-items-center justify-center	bg-primary text-white xs:mt-[32px] md:mt-[29px] font-bold",disabled:x,type:"submit",children:x?e.jsx(F,{}):"ログイン"}),e.jsxs("div",{className:"flex flex-row xs:mt-[16px] md:mt-[32px] font-medium	",children:[e.jsx("button",{type:"button",onClick:()=>c("/member-register"),className:"basis-4/12 text-[#4D94FF] text-base text-left  underline",children:"新規会員登録"}),e.jsx("button",{type:"button",onClick:()=>{c("/password-reset")},className:"basis-8/12 text-[#4D94FF] text-base text-right underline",children:"パスワードを忘れた方はこちら"})]})]})})})})})};export{C as default};
