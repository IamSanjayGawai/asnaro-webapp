import{a as B,s as M,r as a,j as e}from"./index-w2wx-x_X.js";import{d as n}from"./dayjs.min-5rCsLmx2.js";import{m as q,g as O,c as P}from"./cn-hWSFJXCx.js";function W(p){const f=p.reduce((l,u)=>(u.selectedStatus!==""&&(l[u.date]=u),l),{});return Object.values(f)}function T({register:p,errors:f,setValue:j}){var L;const{process:l}=B(M),u=["日","月","火","水","木","金","土"],D=n(),[r,y]=a.useState(D),[d,v]=a.useState([]),[b,A]=a.useState("Vacancies"),[x]=a.useState(""),[,H]=a.useState(!1),[V,C]=a.useState(!1),{isEditCalendar:E}=B(M),N=d.map(t=>({date:t.format("YYYY-MM-DD"),selectedStatus:x})),Z=(L=l==null?void 0:l.processData)==null?void 0:L.availability.map(t=>({...t,date:n(t.date).format("YYYY-MM-DD")})),[S,g]=a.useState(N),c=W(S);a.useEffect(()=>{var t;(t=l==null?void 0:l.processData)!=null&&t.availability&&g(Z)},[l]),a.useEffect(()=>{g(t=>[...t,...N])},[d,x]),a.useEffect(()=>{j("availability",c)},[c]);const R=t=>{const i=n(),h=i.subtract(1,"day"),o=i.add(3,"month");let[s,m]=d;if(t.isAfter(h)&&t.isBefore(o))if(!s||s&&m)v([t]);else{t.isBefore(s)?[s,m]=[t,s]:m=t;const k=[];let w=s.clone();for(;w.isBefore(m.add(1,"day"));)k.push(w),w=w.add(1,"day");v(k)}},F=t=>{const i=n(),h=i.subtract(1,"day"),o=i.add(3,"month");return t.isBefore(h)||t.isAfter(o)};console.log(c,"finalArray");const Y=()=>{if(H(!0),d.length>0){const t=S.map(i=>d.some(h=>n(i.date).isSame(h,"day"))?{...i,selectedStatus:b}:i);g(t),C(!0),v([])}else alert("Please select a date")};return e.jsxs("div",{className:"flex flex-col",children:[e.jsx("div",{className:"flex gap-10 xs:h-[450px] sm:flex-row flex-col border border-secondary pt-[13px]",children:e.jsxs("div",{className:"w-full h-full ",children:[e.jsx("div",{className:"flex justify-center items-center",children:e.jsxs("div",{className:"flex gap-10 justify-center items-center mb-[20px]",children:[e.jsxs("svg",{className:"h-5 cursor-pointer hover:scale-105 transition-all",onClick:()=>{y(r.month(r.month()-1))},xmlns:"http://www.w3.org/2000/svg",width:"40",height:"20",viewBox:"0 0 40 20",fill:"none",children:[e.jsx("path",{d:"M0 0H40V20H0V0Z",fill:"#E6E6E6"}),e.jsx("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M39.1667 0.833333H0.833333V19.1667H39.1667V0.833333ZM0 0V20H40V0H0Z",fill:"#808080"}),e.jsx("path",{d:"M13.9998 9.99721L22.9998 4.80105L22.9998 15.1934L13.9998 9.99721Z",fill:"#808080"})]}),e.jsxs("h1",{className:"select-none font-semibold text-[20px] text-tertiary",children:[r.year(),"年",q[r.month()],"月"]}),e.jsxs("svg",{className:"h-5 cursor-pointer hover:scale-105 transition-all",onClick:()=>{y(r.month(r.month()+1))},xmlns:"http://www.w3.org/2000/svg",width:"40",height:"20",viewBox:"0 0 40 20",fill:"none",children:[e.jsx("path",{d:"M0 0H40V20H0V0Z",fill:"#FFF4DF"}),e.jsx("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M39.1667 0.833333H0.833333V19.1667H39.1667V0.833333ZM0 0V20H40V0H0Z",fill:"#FFAA00"}),e.jsx("path",{d:"M26 10.0008L17 15.197L17 4.80469L26 10.0008Z",fill:"#FFAA00"})]})]})}),e.jsx("div",{className:"grid grid-cols-7 border-b border-secondary ",children:u.map((t,i)=>e.jsx("h1",{className:`text-base text-center h-14 grid place-content-center ${t==="日"?"text-fifth":t==="土"?"text-[#4D94FF]":"text-tertiary"} select-none`,children:t},i))}),e.jsx("div",{className:"grid grid-cols-7",children:O(r.month(),r.year()).map(({date:t,currentMonth:i},h)=>{const o=c.find(s=>n(s.date).isSame(t,"day"));return e.jsx("div",{className:"p-2 text-center h-14 grid place-content-center text-base",children:e.jsxs("div",{className:P(i?"":"hidden",`h-10 w-10 flex ${c.some(s=>n(s.date).isSame(t,"day"))?"bg-[#FFF4DF]":""} flex-col justify-center items-center hover:bg-[#FFF4DF] transition-all cursor-pointer select-none`),children:[e.jsx("p",{children:t.date()}),e.jsxs("div",{className:"flex justify-center items-center gap-1",children:[V&&!E&&c.some(s=>s.selectedStatus&&n(s.date).isSame(t,"day"))?"":e.jsx("input",{type:"checkbox",checked:d.some(s=>s.isSame(t,"day")),onClick:()=>R(t),disabled:F(t)}),d.some(s=>s.isSame(t,"day"))?x==="Vacancies"?e.jsx("svg",{className:"",xmlns:"http://www.w3.org/2000/svg",width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",children:e.jsx("circle",{cx:"7",cy:"7",r:"6",stroke:"#FF8080",strokeWidth:"2"})}):x==="Adjustable"?e.jsx("svg",{className:"",width:"16",height:"16",viewBox:"0 0 16 16",fill:"#FFAA00",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("rect",{x:"1",y:"1",width:"14",height:"14",stroke:"white","stroke-width":"2"})}):x==="Consultation Required"?e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"17",height:"14",viewBox:"0 0 17 14",fill:"none",children:e.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.61785 0.269531L0.912598 13.6154H16.3231L8.61785 0.269531ZM8.61785 3.82844L3.9947 11.836H13.241L8.61785 3.82844Z",fill:"#255BB3"})}):x==="No Vacancies"?e.jsxs("svg",{className:"",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16",fill:"#808080",children:[e.jsx("path",{d:"M12.5118 1.00011L1.48817 15.0001",stroke:"#808080","stroke-width":"2"}),e.jsx("path",{d:"M1.48817 1.00011L12.5118 15.0001",stroke:"#808080","stroke-width":"2"})]}):null:c.some(s=>n(s.date).isSame(t,"day"))?o.selectedStatus==="Vacancies"?e.jsx("svg",{className:"",xmlns:"http://www.w3.org/2000/svg",width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",children:e.jsx("circle",{cx:"7",cy:"7",r:"6",stroke:"#FF8080",strokeWidth:"2"})}):o.selectedStatus==="Adjustable"?e.jsx("svg",{className:"",width:"16",height:"16",viewBox:"0 0 16 16",fill:"#FFAA00",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("rect",{x:"1",y:"1",width:"14",height:"14",stroke:"white","stroke-width":"2"})}):o.selectedStatus==="Consultation Required"?e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"17",height:"14",viewBox:"0 0 17 14",fill:"none",children:e.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.61785 0.269531L0.912598 13.6154H16.3231L8.61785 0.269531ZM8.61785 3.82844L3.9947 11.836H13.241L8.61785 3.82844Z",fill:"#255BB3"})}):o.selectedStatus==="No Vacancies"?e.jsxs("svg",{className:"",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16",fill:"#808080",children:[e.jsx("path",{d:"M12.5118 1.00011L1.48817 15.0001",stroke:"#808080","stroke-width":"2"}),e.jsx("path",{d:"M1.48817 1.00011L12.5118 15.0001",stroke:"#808080","stroke-width":"2"})]}):null:F(t)?"":e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"17",height:"14",viewBox:"0 0 17 14",fill:"none",children:e.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.61785 0.269531L0.912598 13.6154H16.3231L8.61785 0.269531ZM8.61785 3.82844L3.9947 11.836H13.241L8.61785 3.82844Z",fill:"#255BB3"})})]})]})},h)})})]})}),e.jsx("div",{className:"w-full h-[100px] bg-[#F5F5F5] flex xs:px-[20px] lg:px-[50px] justify-center items-center",children:e.jsxs("div",{className:"flex flex-col justify-center gap-2 w-full text-[#808080]",children:[e.jsx("p",{children:"選択中の日程のステータスを変更"}),e.jsxs("div",{className:"flex gap-2 w-full",children:[e.jsxs("div",{className:"xs:basis-3/5 lg:basis-4/5 flex items-center relative text-[#808080]",children:[e.jsxs("select",{...p("calStatus",{required:!0,validate:t=>{if(!(l!=null&&l.processData)){if(c.length===0)return"日付を選択してください";if(t==="Select a status")return"ステータスを選択してください"}},onChange:t=>A(t.target.value)}),value:b,className:"h-[36px] w-full outline-none border border-[#E6E6E6] placeholder-[#E6E6E6] px-1 appearance-none cursor-pointer text-[#808080]",children:[e.jsx("option",{value:"Vacancies",className:"text-[#808080]",children:"空きあり"}),e.jsx("option",{value:"Adjustable",className:"text-[#808080]",children:"調整可能"}),e.jsx("option",{value:"Consultation Required",className:"text-[#808080]",children:"要相談"}),e.jsx("option",{value:"No Vacancies",className:"text-[#808080]",children:"空きなし"})]}),e.jsx("div",{className:"absolute right-0 mr-[9px] cursor-pointer pointer-events-none",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"11",viewBox:"0 0 14 11",fill:"none",children:e.jsx("path",{d:"M7 11L0.937822 0.5L13.0622 0.500001L7 11Z",fill:"#808080"})})})]}),e.jsx("button",{onClick:Y,type:"button",className:"xs:basis-2/5 lg:basis-1/5 bg-primary text-white flex justify-center items-center",children:"変更"})]}),f.calStatus&&e.jsx("p",{className:"text-fifth",children:f.calStatus.message})]})})]})}export{T as C};
