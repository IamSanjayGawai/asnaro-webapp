import{d as B,u as R,r as $,j as s,K as I,X as v,z,R as d,a as T,s as K,f as X,D as Y,Y as G,Z as H,_ as J,$ as O,S as U}from"./index-w2wx-x_X.js";import{S as Q}from"./StatCalender-wz3wZoHT.js";import{N as V}from"./No_Image_Available-oKBWNq14.js";import"./dayjs.min-5rCsLmx2.js";import"./cn-hWSFJXCx.js";const W=({value:e,index:N,loading:i})=>{const l=B(),p=R(),[m,a]=$.useState(e==null?void 0:e.img1);$.useEffect(()=>{e!=null&&e.img1&&a(e.img1)},[e]);const t=x=>{const r=x.target;r.src=V};return s.jsx("div",{className:"col-span-12 border border-secondary md:min-h-[300px] lg:min-h-[450px] shadow-md p-[15px] w-full",children:s.jsxs("div",{className:"flex xs:flex-col lg:flex-row justify-center items-start xs:gap-3 md:gap-5 w-full h-full overflow-hidden",children:[s.jsxs("div",{className:"xs:w-full lg:w-[30%] md:h-[70%] flex flex-col gap-1",children:[s.jsx("div",{className:"h-[70%] bg-secondary",children:i?s.jsx("div",{className:"w-full h-full"}):s.jsx("img",{className:"w-full h-full cursor-pointer",src:m,alt:"process-image",onError:t})}),s.jsxs("div",{className:"h-[30%] flex gap-1",children:[s.jsx("div",{className:"w-1/2 bg-secondary",children:i?s.jsx("div",{className:"w-full h-full"}):s.jsx("img",{className:"w-full h-full cursor-pointer",src:e.img1,alt:"process-image",onClick:()=>a(e.img1),onError:t})}),s.jsx("div",{className:"w-1/2 bg-secondary",children:i?s.jsx("div",{className:"w-full h-full"}):s.jsx("img",{className:"w-full h-full cursor-pointer",src:e.img2,alt:"process-image",onClick:()=>a(e.img2),onError:t})}),s.jsx("div",{className:"w-1/2 bg-secondary",children:i?s.jsx("div",{className:"w-full h-full"}):s.jsx("img",{className:"w-full h-full cursor-pointer",src:e.img3,alt:"process-image",onClick:()=>a(e.img3),onError:t})})]})]}),s.jsxs("div",{className:"xs:w-full lg:w-[40%] flex flex-col justify-center gap-2",children:[s.jsx("p",{className:"text-[16px] text-primary font-bold",children:e.name}),s.jsxs("p",{className:`${e.status==="release"?"text-[#00E676] ":"text-fifth"} text-[10px]`,children:["● ",e.status==="release"?"公開中":"非公開"]}),s.jsx("div",{className:"flex items-center text-[10px] text-fourth gap-2",children:e.tags&&e.tags.length>0&&e.tags.map((x,r)=>s.jsx("div",{className:"rounded-md bg-[#FFF4DF] px-1",children:s.jsx("p",{className:"",children:x})},r))}),s.jsxs("div",{className:"flex flex-col gap-2 text-[12px] h-full",children:[s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx("div",{className:"w-[15%] bg-secondary",children:s.jsx("p",{className:"text-center",children:"工程"})}),s.jsx("div",{className:"w-[85%]",children:s.jsx("p",{className:" line-clamp-3",children:e.process_explanation})})]}),s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx("div",{className:"w-[15%] bg-secondary ",children:s.jsx("p",{className:"text-center",children:"能力"})}),s.jsx("div",{className:"w-[85%] max-w-[85%] overflow-hidden",children:s.jsx("p",{className:"line-clamp-5 ",children:e.capacity})})]}),s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx("div",{className:"w-[15%] bg-secondary",children:s.jsx("p",{className:"text-center",children:"納期"})}),s.jsx("div",{className:"w-[85%] max-w-[85%] overflow-hidden ",children:s.jsxs("p",{className:" line-clamp-1",children:[" ",e.delivery_date," "]})})]}),s.jsxs("div",{className:"flex  gap-3 mt-4  bg-[#FFF4DF] w-full  py-2 px-2  items-center",children:[s.jsx("h2",{className:"bg-[#FFAA00] text-center font-[500] p-1 sm:text-[18px] text-[12px] text-[#fff] w-[80px] py-1",children:"価格"}),s.jsx("div",{className:"flex  items-center py-2  w-full",children:s.jsx("h2",{className:"sm:text-[14px] text-[14px] font-bold text-[#FFAA00]  w-4/5  line-clamp-1 ",children:e!=null&&e.unit_price?e==null?void 0:e.unit_price:"N/A"})})]})]})]}),s.jsxs("div",{className:"xs:hidden lg:block flex flex-col w-[30%] h-full",children:[s.jsxs("div",{className:"w-full flex gap-3 h-[10%] text-white mb-8",children:[s.jsx("button",{onClick:()=>l(I(!0))&&p(`/dashboard/process-list/edit/${e._id}`),className:"w-1/2 bg-fourth",children:"編集"}),s.jsx("button",{onClick:()=>l(v({id:e==null?void 0:e._id,status:e==null?void 0:e.status})),className:"w-1/2 bg-tertiary h",children:(e==null?void 0:e.status)==="release"?"非公開にする":"公開する"})]}),s.jsx("div",{children:s.jsx(Q,{value:e})})]})]})},N)},ls=()=>{var P,C,k,F,E,L,A,_,S,D;const e=z(),i=new URLSearchParams(e.search).get("page"),[l,p]=d.useState(i?parseInt(i):1),m=R(),a=B(),{process:t,status:x,processCount:r,appErr:w,loading:b}=T(K),{other:h,partnerResponse:M,loading:q}=T(X),[n,f]=d.useState("all"),u=10,g=Math.max(1,((P=t==null?void 0:t.pagination)==null?void 0:P.currentPage)-Math.floor(u/2)),j=Math.min((C=t==null?void 0:t.pagination)==null?void 0:C.totalPages,g+u-1),Z=Array.from({length:j-g+1},(c,o)=>g+o);d.useEffect(()=>{window.scrollTo(0,0)},[l]),d.useEffect(()=>{a(Y({})),a(I(!1))},[a,M]),d.useEffect(()=>{n==="all"?a(G(l)):n==="on-sale"?a(H(l)):n==="past"&&a(J(l))},[l,x,(k=t==null?void 0:t.processData)==null?void 0:k.status,n,a]),d.useEffect(()=>{a(O())},[x,a]),console.log(t);const y=async c=>{p(c),m(`/dashboard/process-list?page=${c}`)};return s.jsx(s.Fragment,{children:q?s.jsx(U,{}):(F=h==null?void 0:h.user)!=null&&F.partner_flg?s.jsx("div",{className:"px-[45px] xl:px-0 xl:pl-[50px] xl:pr-[70px] md:max-w-[950px] mx-auto w-full text-base text-tertiary pb-[110px]",children:s.jsxs("div",{className:"grid grid-cols-12 gap-y-3",children:[w&&s.jsx("div",{className:"col-span-12 flex justify-center items-center",children:s.jsx("p",{className:"text-[16px] text-fifth",children:w})}),s.jsxs("div",{className:"col-span-12 flex justify-between",children:[s.jsx("p",{className:"text-[24px] text-primary font-bold",children:"工程一覧"}),s.jsx("button",{onClick:()=>m("/dashboard/process-list/registration"),className:"bg-fourth text-white flex justify-center items-center w-[150px] h-[36px]",children:"工程を登録する"})]}),s.jsx("div",{className:"col-span-12"}),s.jsxs("div",{className:"col-span-12 grid grid-cols-12 gap-x-3 h-[30px] border-b border-secondary",children:[s.jsxs("p",{className:`xs:col-span-3 lg:col-span-2 font-[500] ${n==="all"?"border-b border-primary text-primary":""} md:px-1 lg:px-3 cursor-pointer`,onClick:()=>f("all"),children:["ALL(",(E=r==null?void 0:r.processCount)==null?void 0:E.totalProcesses,")"]}),s.jsxs("p",{className:`xs:col-span-3 lg:col-span-2 font-[500] ${n==="on-sale"?"border-b border-primary text-primary":""} lg:px-1 cursor-pointer`,onClick:()=>f("on-sale"),children:["公開中(",(L=r==null?void 0:r.processCount)==null?void 0:L.releaseProcesses,")"]}),s.jsxs("p",{className:`xs:col-span-4 lg:col-span-2 font-[500] ${n==="past"?"border-b border-primary text-primary":""} lg:px-1 cursor-pointer`,onClick:()=>f("past"),children:["非公開(",(A=r==null?void 0:r.processCount)==null?void 0:A.privateProcesses,")"]})]}),b?s.jsx("div",{className:"col-span-12",children:s.jsx(U,{})}):s.jsx("div",{className:"col-span-12 flex flex-col gap-5",children:t!=null&&t.data&&((_=t==null?void 0:t.data)==null?void 0:_.length)>0?t.data.map((c,o)=>s.jsx(W,{value:c,loading:b,index:o},o)):s.jsx("div",{className:"col-span-12 text-primary text-center text-[32px] font-bold flex justify-center items-center h-screen",children:"表示するデータがありません"})}),((S=t==null?void 0:t.data)==null?void 0:S.length)>0&&s.jsxs("div",{className:"col-span-12 bg-[#F5F5F5] h-[60px] flex justify-center items-center gap-2 mt-[50px]",children:[s.jsx("div",{className:"flex gap-1",children:Z.map((c,o)=>s.jsx("button",{className:`border w-[25px] ${l===c?"bg-primary text-white":"bg-white"} border-[#DCDCDC]`,onClick:()=>y(c),children:c},o))}),j<((D=t==null?void 0:t.pagination)==null?void 0:D.totalPages)&&s.jsxs("div",{className:"flex gap-1 items-center cursor-pointer",onClick:()=>y(j+1),children:[s.jsx("div",{className:"font-[500] text-primary text-[16px] w-full",children:"次ページ"}),s.jsx("svg",{className:"",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"18",viewBox:"0 0 16 18",fill:"none",children:s.jsx("path",{d:"M15.4318 9L0.138137 17.6603L0.138138 0.339745L15.4318 9Z",fill:"#255BB3"})})]})]})]})}):s.jsx("div",{className:"flex justify-center xs:gap-2 md:gap-10 w-full h-screen my-[75px]",children:"Become a partner to view this page"})})};export{ls as default};
