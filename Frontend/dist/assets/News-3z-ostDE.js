import{r as a,u as N,d as L,a as S,e as k,i as B,j as t}from"./index-w2wx-x_X.js";import{N as M}from"./NewsDetailSkeleton-Jre6d36Q.js";const $=()=>{var m,g,h,f,u,j;const x=new URLSearchParams(location.search).get("page"),[r,w]=a.useState(x?parseInt(x):1),b=N(),y=L(),{newsAll:e,loading:v}=S(k),l=10,c=Math.max(1,((m=e==null?void 0:e.pagination)==null?void 0:m.currentPage)-Math.floor(l/2)),o=Math.min((g=e==null?void 0:e.pagination)==null?void 0:g.totalPages,c+l-1),C=Array.from({length:o-c+1},(s,n)=>c+n),[E,D]=a.useState(!0),F=v||E;a.useEffect(()=>{const s=setTimeout(()=>{D(!1)},1e3);return()=>clearTimeout(s)},[]),a.useEffect(()=>{window.scrollTo(0,0)},[r]),a.useEffect(()=>{y(B(r))},[r]);const i=N(),d=async s=>{w(s),i(`/news?page=${s}`)},[p,P]=a.useState(null);return a.useEffect(()=>{var s;if(((s=e==null?void 0:e.news)==null?void 0:s.length)>0){const n=Math.floor(Math.random()*e.news.length);P(e.news[n].image)}},[e]),t.jsx(t.Fragment,{children:t.jsx("div",{className:"flex justify-center flex-col  items-center border-b border-secondary",children:t.jsxs("div",{className:"md:block max-w-[1200px] w-full xs:px-4 sm:px-6 md:px-8 xs:py-3 md:py-5 lg:py-6",children:[t.jsx("h1",{className:"sm:text-2xl text-xl text-[#808080] font-bold",children:"News"}),t.jsx("div",{className:"bg-[#DCDCDC] w-full max-w-[1200px] h-[442px] mx-auto mb-[40px] ",children:p&&t.jsx("img",{src:p,alt:"news",className:"w-full h-full object-cover"})}),!F&&e?(h=e==null?void 0:e.news)==null?void 0:h.map(s=>t.jsx(t.Fragment,{children:t.jsx("div",{className:"mt-4",children:t.jsxs("div",{className:`grid sm:grid-cols-[100px,auto]  gap-[10px] border-t-[1px]  border-t-[#E6E6E6] border-b-[#E6E6E6] pt-6 pb-2 cursor-pointer  ${e.news.indexOf(s)===e.news.length-1&&"border-b-[1px] pb-6"}`,onClick:()=>i(`/news-detail/${s==null?void 0:s._id}`),children:[t.jsx("h1",{className:"sm:text-[#808080] sm:text-[14px] sm:font-[400] font-[500] text-[12px]",children:new Date(s==null?void 0:s.delivery_date).toLocaleDateString("en-US",{year:"numeric",month:"2-digit",day:"2-digit"}).replace(/\//g,"-")}),t.jsxs("div",{className:"flex gap-2 flex-col",children:[t.jsx("p",{className:"sm:text-[#808080] text-[#255BB3] sm:text-[14px] sm:font-[400] font-[700] text-[12px]",children:t.jsx("span",{className:" font-bold ",children:s==null?void 0:s.news_title})}),t.jsx("p",{className:"sm:col-start-2 text-[#808080] sm:text-[14px] text-[12px] sm:font-[400] font-[500] ",children:t.jsx("span",{className:"line-clamp-1 ",children:s==null?void 0:s.news_comment})})]})]})},s._id)})):(f=e==null?void 0:e.news)==null?void 0:f.map(()=>t.jsx(M,{})),((u=e==null?void 0:e.news)==null?void 0:u.length)>0&&t.jsxs("div",{className:"col-span-12 bg-[#F5F5F5] h-[60px] flex justify-center items-center gap-2 mt-[50px]",children:[t.jsx("div",{className:"flex gap-1",children:C.map((s,n)=>t.jsx("button",{className:`border w-[25px] ${r===s?"bg-primary text-white":"bg-white"} border-[#DCDCDC]`,onClick:()=>d(s),children:s},n))}),o<((j=e==null?void 0:e.pagination)==null?void 0:j.totalPages)&&t.jsxs("div",{className:"flex gap-1 items-center cursor-pointer",onClick:()=>d(o+1),children:[t.jsx("div",{className:"font-[500] text-primary text-[16px] w-full",children:"次ページ"}),t.jsx("svg",{className:"",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"18",viewBox:"0 0 16 18",fill:"none",children:t.jsx("path",{d:"M15.4318 9L0.138137 17.6603L0.138138 0.339745L15.4318 9Z",fill:"#255BB3"})})]})]}),t.jsx("div",{className:"flex justify-center my-[108px]",children:t.jsx("button",{onClick:()=>b(-1),className:"bg-[#808080] text-sm font-bold text-[#FFFFFF] px-8 py-2 w-full  max-w-[263px]",children:"戻る"})})]})})})};export{$ as default};
