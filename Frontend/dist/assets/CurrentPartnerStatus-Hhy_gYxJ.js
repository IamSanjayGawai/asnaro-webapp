import{d as P,r,j as e,ax as M,a as C,ae as S,z,u as q,R as O,S as A,ay as U}from"./index-w2wx-x_X.js";import{K as $}from"./baseline-5AKzli58.js";import{R as K}from"./index.esm-y_8cUbAG.js";import{u as Z}from"./useTableTheme-44lDDVWp.js";import"./emotion-react.browser.esm-kI5PoqX3.js";import"./hoist-non-react-statics.cjs-j2Vrlo-h.js";import"./extends-_9I-EFOp.js";import"./assertThisInitialized-4q6YPdh3.js";import"./memoize-one.esm-oV5jpQgL.js";import"./setPrototypeOf-ahVgEFUp.js";import"./iconBase-7AsOp5YA.js";const G=({showModal:c,setShowModal:t,show:l=!0,idToApprove:x})=>{const o=P(),[i]=r.useState(!0),m=async()=>{await o(M(x)),await t(!1)};return e.jsx(e.Fragment,{children:c?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:`justify-center items-center flex overflow-x-hidden overflow-y-auto fixed inset-0 z-50 outline-none focus:outline-none\r
            \r
            `,children:e.jsx("div",{className:"relative w-auto my-6 mx-auto max-w-3xl",children:e.jsxs("div",{className:"border-0  shadow-lg relative flex gap-5 flex-col w-full bg-white outline-none focus:outline-none",children:[e.jsx("div",{className:"flex items-start justify-between p-4  rounded-t",children:e.jsx("button",{className:"p-1 ml-auto bg-transparent border-0 text-black float-right text-3xl leading-none font-semibold outline-none focus:outline-none",onClick:()=>t(!1),children:e.jsx(K,{})})}),i?e.jsxs("div",{className:"relative px-4 gap-5 flex-auto ",children:[e.jsx("h3",{className:"mb-6 text-[#255BB3] text-center font-noto-sans-jp font-bold text-[20px]",children:"本気ですか？ ×"}),e.jsx("p",{className:"text-[#808080] text-sm font-noto-sans-jp px-8 text-base font-[500]  w-2/3 mt-[4em] mb-[3em] mx-auto",children:"このユーザーのパートナーとして申請することに同意しますか? はいの場合は [適用] ボタンをクリックし、いいえの場合は [戻る] をクリックしますか?"})]}):e.jsxs("div",{className:"relative px-4 gap-5 flex-auto ",children:[e.jsx("h3",{className:"mb-6 text-[#255BB3] text-center font-noto-sans-jp font-bold text-[20px]",children:"本気ですか？ ×"}),e.jsx("p",{className:"text-[#808080] text-sm font-noto-sans-jp px-8 text-base font-[500]  w-2/3 mt-[4em] mb-[3em] mx-auto",children:"このユーザーのパートナーとして申請することに同意しますか? はいの場合は [適用] ボタンをクリックし、いいえの場合は [戻る] をクリックしますか?"})]}),e.jsxs("div",{className:"grid grid-cols-1 justify-center p-4 w-2/3 mx-auto mb-8 ",children:[l&&e.jsx("button",{className:"bg-[#FFAA00] text-white  font-bold uppercase text-sm px-6 py-3 w-[348px]  outline-none  mx-auto mb-2",type:"submit",onClick:m,children:"適用する"}),e.jsx("button",{className:"bg-[#808080] text-white  font-bold uppercase text-sm px-6 py-3 w-[348px] mx-auto  outline-none mb-1",type:"button",onClick:()=>t(!1),children:"戻る"})]})]})})}),e.jsx("div",{className:"opacity-25 fixed inset-0 z-40 bg-black"})]}):null})},re=()=>{var N,w,v,y,k;const{loading:c}=C(S),{allpartnersData:t,partnerListLoading:l}=C(S),x=z(),[o,i]=r.useState(!1),[m,_]=r.useState(null),h=P(),E=Z("1.2fr 2fr 2fr 4fr",4),f=new URLSearchParams(x.search).get("page"),[d,I]=r.useState(f?parseInt(f):1),R=q(),g=10,p=Math.max(1,((N=t==null?void 0:t.pagination)==null?void 0:N.currentPage)-Math.floor(g/2)),u=Math.min((w=t==null?void 0:t.pagination)==null?void 0:w.totalPages,p+g-1),B=Array.from({length:u-p+1},(s,n)=>p+n);r.useEffect(()=>{(async()=>{await h(U(d))})()},[d,h,l]);let F=[];O.useEffect(()=>{var s;if(Array.isArray(t==null?void 0:t.partners)){const n=t&&((s=t==null?void 0:t.partners)==null?void 0:s.map(a=>({admit:a.partner_flg,Enterprise_ID:a._id||"NA",Registered_Date:a.createdAt||"NA",Company_name:a.name01||"NA"})));j({nodes:n})}},[t,t==null?void 0:t.partners]);const[L,j]=r.useState({nodes:F}),T=s=>{j(n=>({...n,nodes:n.nodes.map(a=>a.Enterprise_ID===s?{...a}:a)})),_(s),i(!0)},D=[{label:"承認",key:"admit",renderCell:s=>e.jsx("div",{className:"flex items-center ",children:e.jsx("input",{type:"checkbox",checked:s.admit,onChange:()=>T(s.Enterprise_ID)})})},{label:"企業ID",key:"Enterprise_ID",renderCell:s=>e.jsx("div",{className:"text-[#808080] text-[12px] font-[400]  line-clamp-3 text-center ",style:{whiteSpace:"normal"},children:s.Enterprise_ID})},{label:"登録日時",key:"Registered_Date",renderCell:s=>e.jsx("div",{className:"text-[#808080] text-[12px] font-[400]  line-clamp-3 text-center ",style:{whiteSpace:"normal"},children:new Date(s.Registered_Date).toISOString().split("T")[0]})},{label:e.jsx("span",{className:"flex justify-center items-center ",children:"企業名"}),key:"Company_name",renderCell:s=>e.jsx("div",{className:"text-[#808080] text-[12px] font-[400] line-clamp-3 text-center break-all",style:{whiteSpace:"normal"},children:s.Company_name})}],b=async s=>{I(s),R(`/admin/dashboard?page=${s}`)};return e.jsxs(e.Fragment,{children:[c?e.jsx(A,{}):e.jsxs("div",{className:"w-full mb-40",children:[e.jsxs("div",{className:"lg:mx-20 md:mx-8 xs:mx-8 flex  flex-col xs:mt-[24px] md:mt-[50px]",children:[e.jsx("h1",{className:"text-[#808080] font-[700] text-[24px] mb-4",children:"現在の取引先企業の状況"}),e.jsx("textarea",{className:"w-full h-[150px] border-[1px]  p-4 resize-none "})]}),e.jsxs("div",{className:"lg:mx-20 md:mx-8 xs:mx-8 mt-[3rem]  lg:min-w-[900px] ",children:[e.jsx("div",{className:"flex items-center justify-between sm:block ",children:e.jsx("h1",{className:"sm:text-[#808080] text-[#808080] font-[700] sm:text-[24px] text-xl  md:mb-0",children:"パートナー管理"})}),e.jsx("div",{className:"text-sm hidden sm:block  font-medium text-center text-[#808080]  dark:text-gray-400",children:e.jsx("ul",{className:"flex flex-wrap -mb-px gap-4 mt-4 ",children:e.jsx("li",{className:"me-2",children:e.jsx("a",{href:"#",className:"inline-block p-1 text-[12px] text-[#808080] rounded-t-lg active dark:text-[#808080] ","aria-current":"page",children:"※パートナー未承認企業が一覧で表示されます"})})})}),e.jsx("div",{className:"mt-4 border-[1px] border-[#E6E6E6] overflow-x-auto",children:!l&&t&&((v=t.partners)==null?void 0:v.length)>0?e.jsx($,{data:L,columns:D,theme:E,layout:{custom:!0,horizontalScroll:!0}}):!l&&t&&((y=t.partners)==null?void 0:y.length)===0?e.jsx("div",{children:"No incoming partner requests or unapproved partners"}):e.jsx(A,{className:"w-full h-full"})}),e.jsxs("div",{className:"col-span-12 bg-[#F5F5F5] h-[60px] flex justify-center items-center gap-2 mt-[50px]",children:[e.jsx("div",{className:"flex gap-1",children:B.map((s,n)=>e.jsx("button",{className:`border w-[25px] ${d===s?"bg-primary text-white":"bg-white"} border-[#DCDCDC]`,onClick:()=>b(s),children:s},n))}),u<((k=t==null?void 0:t.pagination)==null?void 0:k.totalPages)&&e.jsxs("div",{className:"flex gap-1 items-center cursor-pointer",onClick:()=>b(u+1),children:[e.jsx("div",{className:"font-[500] text-primary text-[16px] w-full",children:"次ページ"}),e.jsx("svg",{className:"",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"18",viewBox:"0 0 16 18",fill:"none",children:e.jsx("path",{d:"M15.4318 9L0.138137 17.6603L0.138138 0.339745L15.4318 9Z",fill:"#255BB3"})})]})]})]})]}),o?e.jsx(G,{showModal:o,setShowModal:i,idToApprove:m}):""]})};export{re as default};
